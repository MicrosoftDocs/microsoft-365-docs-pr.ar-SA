---
title: إعداد وتكوين المكونات الإضافية ل Moodle LMS ل Open LMS
ms.author: danismith
author: DaniEASmith
manager: serdars
ms.reviewer: amitman
audience: admin
ms.topic: article
ms.service: o365-administration
f1.keywords:
- CSH
ms.collection: M365-modern-desktop
ms.localizationpriority: medium
description: استعد لدمج Open LMS وMicrosoft Teams من خلال إعداد وتكوين المكونات الإضافية ل Moodle LMS.
ms.openlocfilehash: dbc85e8643159552e3e9bf340deef1856b542aab
ms.sourcegitcommit: 2f6a7410e9919f753a759c1ada441141e18f06fd
ms.translationtype: MT
ms.contentlocale: ar-SA
ms.lasthandoff: 07/30/2022
ms.locfileid: "67085960"
---
# <a name="set-up-and-configure-the-moodle-lms-plugins-for-open-lms"></a>إعداد وتكوين المكونات الإضافية ل Moodle LMS ل Open LMS

في هذه المقالة، ستتعلم كيفية تثبيت وتكوين المكونات الإضافية ل Moodle LMS لدمج Microsoft Teams مع تجربة Open LMS.

## <a name="prerequisites"></a>المتطلبات الأساسية

لإعداد وتكوين Open LMS مثبت للعمل مع Microsoft Teams:

- تحقق من أن [موديل OpenID Connect](https://moodle.org/plugins/auth_oidc) والمكونات الإضافية [للتكامل في Microsoft 365](https://moodle.org/plugins/local_o365) نشطة.

## <a name="configure-the-connection-between-the-microsoft-365-plugins-and-microsoft-services"></a>تكوين الاتصال بين مكونات Microsoft 365 الإضافية وخدمات Microsoft

يجب تكوين الاتصال بين مكونات Microsoft 365 الإضافية وخدمات Microsoft قبل أن تتمكن من العمل معا.

> [!NOTE]
> أثناء تكوين التكامل، احتفظ بصفحة تكوين تكامل Microsoft 365 مفتوحة في علامة تبويب مستعرض منفصلة لأنك ستحتاج إلى العودة إلى هذه الصفحات طوال العملية.

### <a name="enable-the-openid-connect-authentication-plugin"></a>تمكين المكون الإضافي لمصادقة OpenID Connect

لكي تتصل مكونات Moodle الإضافية بخدمات Microsoft، يجب تشغيل المكون الإضافي لمصادقة OpenID Connect وتكوينه.

1. انتقل إلى **مصادقة** **المكونات الإضافية** >  **لإدارة** >  الموقع ثم حدد **"إدارة المصادقة**".
1. ابحث عن المكون الإضافي لمصادقة **OpenID Connect** وحدد *أيقونة العين* لتشغيله.
1. حدد **إعدادات** المكون الإضافي للتحقق من نقاط نهاية **التخويل** **والرمز المميز** .
    1. يجب أن تكون القيم الافتراضية:
        1. نقطة نهاية التخويل: ``https://login.microsoftonline.com/common/oauth2/authorize``.
        1. نقطة نهاية الرمز المميز: ``https://login.microsoftonline.com/common/oauth2/token``.
1. سجل **URI إعادة التوجيه** لاستخدامه لاحقا.

> [!NOTE]
> ليس مطلوبا لجميع مستخدمي Open LMS استخدام المكون الإضافي لمصادقة OpenID Connect كطريقة مصادقة؛ ومع ذلك، إذا كانوا يستخدمون أساليب مصادقة أخرى، يجب أن تكون حسابات LMS المفتوحة *الخاصة بهم متصلة* بحسابات Microsoft المقابلة قبل أن يتمكنوا من استخدام ميزات معينة في تكامل Teams، مثل مزامنة ملكية Teams وعضويته.

### <a name="requisites"></a>لوازم

سجل Open LMS كتطبيق في Azure AD باستخدام البرنامج النصي PowerShell. البرنامج النصي توفير العناصر التالية:

- تطبيق Azure AD جديد لمستأجر Microsoft 365، والذي تستخدمه مكونات Microsoft 365 Moodle الإضافية.
- يقوم التطبيق لمستأجر Microsoft 365 بإعداد عناوين URL للرد المطلوبة والأذونات للتطبيق الذي تم توفيره وإرجاع `AppID` `Key`و.
- على أنظمة التشغيل التي ليست Windows، يجب عليك فقط اتباع العملية اليدوية لتسجيل مثيل Open LMS في Azure. راجع قسم التنبيه *"هام* " أدناه للحصول على التفاصيل.

> [!IMPORTANT]
> لمزيد من المعلومات حول تسجيل مثيل Open LMS يدويا، راجع [تسجيل مثيل Open LMS الخاص بك كتطبيق](https://docs.moodle.org/400/en/Microsoft_365#Azure_App_Creation_and_Configuration).
>
> بمجرد تسجيل التطبيق الخاص بك، تحقق من تطبيق جميع أذونات تطبيق Azure. لمزيد من المعلومات، راجع [أذونات تطبيق Azure](https://docs.moodle.org/400/en/Microsoft_365#Azure_app_permissions).

### <a name="register-application-in-azure-using-powershell"></a>تسجيل التطبيق في Azure باستخدام PowerShell

#### <a name="step-1-create-azure-app"></a>الخطوة 1: إنشاء تطبيق Azure

1. انتقل إلى **المكونات الإضافية** >  المحلية **لإدارة** >  الموقع ثم حدد **تكامل Microsoft 365**. سيؤدي ذلك إلى فتح صفحة تكوين تكامل Microsoft 365.

1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعداد** ".

1. حدد الزر **"تنزيل البرنامج النصي PowerShell** " واحفظه كمجلد ZIP على الكمبيوتر المحلي.

    > [!NOTE]
    > يؤدي تشغيل البرنامج النصي إلى إنشاء تطبيق Azure AD جديد في مستأجر Microsoft 365، الذي يقوم بإعداد عناوين URL والأذونات للرد المطلوبة، ويمنح الأذونات المطلوبة، ويرجع `AppID` `Key`و.
    >
    > لا يعمل البرنامج النصي في PowerShell على أنظمة التشغيل التي ليست Windows.

1. قم بإعداد البرنامج النصي PowerShell من ملف ZIP كما يلي:
    1. قم بتنزيل الملف واستخراجه `Moodle-AzureAD-Powershell.zip` .
    1. افتح المجلد المستخرج.
    1. انقر بزر الماوس الأيمن فوق `Moodle-AzureAD-Script.ps1` الملف وحدد **"Properties**".
    1. ضمن علامة التبويب **"عام** " في النافذة "خصائص"، حدد خانة `Unblock` الاختيار الموجودة بجانب سمة **الأمان** الموجودة في أسفل النافذة.
    1. حدد **موافق**.
    1. انسخ مسار الدليل إلى المجلد المستخرج.

1. تشغيل PowerShell كمسؤول:
    1. في Windows، افتح قائمة البدء.
    1. النوع `PowerShell`.
    1. انقر بزر الماوس الأيمن فوق **Windows PowerShell**.
    1. حدد **"تشغيل كمسؤول**".

1. انتقل إلى الدليل غير المضغوط عن طريق كتابة `cd .../.../Moodle-AzureAD-Powershell` مكان `.../...` المسار إلى الدليل.

1. تنفيذ البرنامج النصي PowerShell:
    1. أدخل `./Moodle-AzureAD-Script.ps1`.
    1. عند سؤالك، سجل الدخول إلى حساب مسؤول Microsoft 365 في النافذة المنبثقة.
    1. عند سؤالك، أدخل اسم تطبيق Azure AD. على سبيل المثال، افتح مكونات LMS أو Moodle أو Moodle الإضافية.
    1. عند سؤالك، أدخل عنوان URL لخادم Open LMS.
    1. عند سؤالك، أدخل عنوان URL للرد المنسوخ من صفحة تكوين المكون الإضافي لمصادقة OpenID Connect. هذا هو عنوان URL لموقع Open LMS متبوعا ب `\auth\oidc\`.
    1. قد يطلب منك تسجيل الدخول إلى حساب Microsoft 365 مرة أخرى في نافذة منبثقة في العملية. هذا لتوفير موافقة المسؤول على الأذونات المضافة إلى التطبيق لمؤسستك.
    1. عند انتهاء البرنامج النصي من التنفيذ، انسخ **معرف التطبيق (`AppID`)** **ومفتاح التطبيق (`Key`)** الذي أنشأه البرنامج النصي واحفظهما.

#### <a name="step-2-set-azure-app-details-in-openid-connect"></a>الخطوة 2: تعيين تفاصيل تطبيق Azure في OpenID Connect

1. العودة إلى صفحة تكوين المكون الإضافي لمصادقة OpenID Connect.
1. الصق `AppID` القيمة في مربع **"معرف التطبيق"** والقيمة `Key` في مربع **المفتاح** ، ثم حدد **"حفظ التغييرات**".

#### <a name="step-3-configure-connection-between-microsoft-plugins-and-microsoft-services"></a>الخطوة 3: تكوين الاتصال بين مكونات Microsoft الإضافية وخدمات Microsoft

1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعداد** ".
1. في **أسلوب "اختيار الاتصال**"، حدد **"الوصول إلى التطبيق**"، ثم حدد **"حفظ التغييرات"** مرة أخرى.
1. بعد تحديث الصفحة، يمكنك الاطلاع على قسم جديد آخر **مسؤول الموافقة & معلومات إضافية**.
    1. حدد **"توفير مسؤول ارتباط الموافقة**"، أدخل بيانات اعتماد المسؤول العام ل Microsoft 365، ثم **اقبل** لمنح الأذونات.
    1. إلى جانب حقل **المستأجر Azure AD**، حدد الزر **"كشف".**
    1. إلى جانب **عنوان URL OneDrive for Business**، حدد الزر **"كشف**".
    1. بعد ملء الحقول، حدد الزر **"حفظ التغييرات"** مرة أخرى.
1. حدد الزر **"تحديث** " للتحقق من التثبيت. إذا لم يتم الإبلاغ عن أي خطأ في هذه المرحلة، فهذا يعني أن مكونات Microsoft الإضافية يمكنها الاتصال بخادم Microsoft عبر واجهات برمجة تطبيقات Microsoft Graph.

#### <a name="step-4-configure-user-and-course-synchronization"></a>الخطوة 4: تكوين مزامنة المستخدم والدورة التدريبية

1. مزامنة المستخدمين بين خادم Open LMS Azure AD. اعتمادا على بيئتك، يمكنك تحديد خيارات مختلفة خلال هذه المرحلة. لبدء الاستخدام:

    1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعدادات المزامنة** ".

    1. في إعداد "**مزامنة المستخدمين Azure AD**"، حدد خانات الاختيار التي تنطبق على بيئتك. يجب تحديد الخيارات التالية:  
        ✔ إنشاء حسابات في Open LMS للمستخدمين في Azure AD.
       ✔ تحديث كافة الحسابات في Open LMS للمستخدمين في Azure AD.

    1. في المقطع **"تقييد إنشاء المستخدم**"، يمكنك إعداد عامل تصفية للحد من Azure AD المستخدمين الذين تمت مزامنتهم إلى Open LMS.

        > [!NOTE]
        > ليس مطلوبا تماما لتمكين مزامنة المستخدم؛ ومع ذلك، سيجعل توصيل مستخدمي Open LMS بحسابات Microsoft 365 أسهل بكثير.
        >
        > يتم تنفيذ مزامنة المستخدم عن طريق تشغيل **المستخدمين "مزامنة" مع مهمة** مجدولة Azure AD.

1. في قسم " **مزامنة الدورة التدريبية** "، يمكنك تحديد خيار **تخصيص مزامنة الدورة التدريبية** لتمكين الإنشاء التلقائي ل Teams لبعض دورات Open LMS الحالية أو كلها.

    > [!NOTE]
    > يتم تنفيذ مزامنة الدورة التدريبية عن طريق تشغيل **دورات Sync Moodle التدريبية إلى** المهمة المجدولة من Microsoft Teams.

1. حفظ التغييرات.

1. للتحقق من صحة تكوين المزامنة، ستحتاج إلى تشغيل المهام المجدولة يدويا للمرة الأولى. انتقل إلى **المهام المجدولة** **لمهام** > **Server** >  **لإدارة** >  الموقع.

    1. قم بالتمرير لأسفل وابحث عن المهمة "**مزامنة المستخدمين" باستخدام Azure AD** وحدد **"تشغيل الآن**".
        1. سيؤدي ذلك إلى مزامنة Azure AD المستخدمين إلى موقع Open LMS وفقا لخيارات مزامنة المستخدم.
    1. بعد ذلك، ابحث عن **دورات Sync Moodle التدريبية لمهمة Microsoft Teams** وحدد **تشغيل الآن**.
        1. ستنشئ هذه المهمة مجموعات لجميع دورات Open LMS التدريبية مع تشغيل خيار المزامنة، وكذلك Teams إذا كان يمكن العثور على **مالك الفريق** في الدورة التدريبية.
        1. ستقوم هذه المهمة أيضا بمزامنة مستخدمي Open LMS المسجلين في الدورة التدريبية مع Teams كملاك أو أعضاء.
            1. **مالك** الفريق هو مستخدم Open LMS يستوفي جميع المعايير التالية:
                1. متصل بحساب Microsoft 365.
                2. مسجل في الدورة التدريبية.
                3. `local/o365:teamowner` لديه القدرة في سياق الدورة التدريبية.
            1. وبالمثل، فإن **عضو** الفريق هو مستخدم Open LMS يستوفي جميع المعايير التالية:
                1. متصل بحساب Microsoft 365.
                2. مسجل في الدورة التدريبية.
                3. `local/o365:teamember` لديه القدرة في سياق الدورة التدريبية.
            1. دور *المعلم* الافتراضي لديه `local/o365:teamowner` القدرة، ودور *الطالب* الافتراضي لديه `local/o365:teammember` القدرة.

> [!NOTE]
> يتم تشغيل المهام المجدولة بواسطة [Moodle Cron](https://docs.moodle.org/400/en/Cron)، والتي تحتاج إلى تكوين لتشغيلها بشكل متكرر. يمكن أن يكون لكل مهمة مجدولة جدول افتراضي ويمكن تخصيصها.
>
> - الجدول الافتراضي **لمستخدمي المزامنة مع** Azure AD المهمة هو كل دقيقة.
> - يكون الجدول الافتراضي **لدورات Sync Moodle التدريبية لمهمة Microsoft Teams** يوميا في الساعة 1 صباحا في المنطقة الزمنية الافتراضية لخادم Open LMS.

بعد تثبيت المكونات الإضافية وتكوينها، يمكنك:

- [إضافة فصول واجتماعات Teams إلى Open LMS](open-lms-teams-classes-and-meetings.md).
- [توزيع Moodle Assistant Bot إلى Azure](/microsoftteams/install-moodle-integration#step-3-deploy-the-moodle-assistant-bot-to-azure).
- [أضف علامات تبويب Moodle إلى فصول Teams](/microsoftteams/install-moodle-integration#step-4-deploy-your-microsoft-teams-app).

## <a name="extra-moodle-plugin-documentation"></a>وثائق المكون الإضافي Extra Moodle

إذا كنت ترغب في مراجعة إرشادات تكامل Microsoft 365 الخاصة ب Open LMS وملاحظات الإصدار، فراجع هذه الموارد:

- [وثائق تكامل Microsoft 365 على مستندات Moodle](https://docs.moodle.org/400/en/Microsoft_365).
