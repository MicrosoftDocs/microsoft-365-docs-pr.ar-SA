---
title: إعداد وتكوين المكونات الإضافية ل Moodle LMS
ms.author: danismith
author: DaniEASmith
manager: serdars
ms.reviewer: amitman
audience: admin
ms.topic: article
ms.service: o365-administration
f1.keywords:
- CSH
ms.collection: M365-modern-desktop
ms.localizationpriority: medium
description: استعد لدمج Moodle وMicrosoft Teams من خلال إعداد وتكوين المكونات الإضافية ل Moodle LMS.
ms.openlocfilehash: b1188878c8d0af5041bf25bb566dc0707f4e5ad4
ms.sourcegitcommit: 5e5c2c1f7c321b5eb1c5b932c03bdd510005de13
ms.translationtype: MT
ms.contentlocale: ar-SA
ms.lasthandoff: 07/15/2022
ms.locfileid: "66858090"
---
# <a name="set-up-the-moodle-lms-plugins"></a>إعداد المكونات الإضافية ل Moodle LMS

في هذه المقالة، ستتعلم كيفية تثبيت المكونات الإضافية ل Moodle LMS وتكوينها لدمج Microsoft Teams مع تجربة Moodle.

## <a name="prerequisites"></a>المتطلبات الأساسية

فيما يلي المتطلبات الأساسية لإعداد موديل مثبت للعمل مع Microsoft Teams:

* بيانات اعتماد مسؤول Moodle.
* Azure AD بيانات اعتماد المسؤول.
* اشتراك Azure حيث يمكنك إنشاء موارد جديدة.

## <a name="1-install-the-microsoft-365-moodle-plugins"></a>1. تثبيت مكونات Microsoft 365 Moodle الإضافية

يتم تشغيل تكامل Moodle مع Microsoft Teams بواسطة Open Source [مجموعة مكونات Microsoft 365 Moodle الإضافية](https://moodle.org/plugins/browse.php?list=set&id=72).

### <a name="requisite-applications-and-plugins"></a>التطبيقات والمكونات الإضافية المطلوبة

تنزيل العناصر التالية وتثبيتها:

1. [إصدار مستقر حالي من Moodle](https://download.moodle.org/releases/latest/).

    > [!IMPORTANT]
    > إذا لم يكن لديك موقع موديل موجود، فانتقل إلى [Moodle على مستودع Azure](https://github.com/azure/moodle) ، وانشر مثيل Moodle بسرعة وقم بتخصيصه وفقا لاحتياجاتك.

1. قم بتنزيل ميزة Moodle [OpenID Connect](https://moodle.org/plugins/auth_oidc) والمكونات الإضافية [ل Microsoft 365 Integration](https://moodle.org/plugins/local_o365) وحفظها على الكمبيوتر المحلي.

    > [!NOTE]
    > يلزم تثبيت المكونين الإضافيين OpenID Connect وMicrosoft 365 Integration من أجل تكامل Teams.
    >
    > نوصي أيضا بتثبيت المكون الإضافي [لنسق Microsoft 365 Teams](https://moodle.org/plugins/theme_boost_o365teams) .

### <a name="microsoft-365-moodle-plugins"></a>مكونات Microsoft 365 Moodle الإضافية

#### <a name="install-plugins"></a>تثبيت المكونات الإضافية

1. قم بتنزيل المكونات الإضافية واستخراجها وتحميلها إلى مجلداتها المقابلة.
    * استخراج المكون الإضافي OpenID Connect (auth_oidc) إلى مجلد يسمى **oidc**، وتحميله إلى مجلد **المصادقة** لجذر مستند Moodle.
    * استخرج المكون الإضافي Microsoft 365 Integration (local_o365) إلى مجلد يسمى **o365**، ثم قم بتحميله إلى المجلد **المحلي** لجذر مستند Moodle.
1. سجل الدخول إلى موقع Moodle كمسؤول وحدد **إدارة الموقع**.
1. عند الكشف عن المكونات الإضافية الجديدة التي سيتم تثبيتها، يجب على Moodle إعادة توجيهك إلى صفحة تثبيت المكونات الإضافية الجديدة. إذا لم يحدث ذلك، في صفحة **إدارة الموقع** ، حدد **الإعلامات** في علامة التبويب **"عام** "، يجب أن يؤدي هذا الإجراء إلى تثبيت المكونات الإضافية.
1. بعد تثبيت المكونات الإضافية الجديدة، سيعرض لك Moodle صفحة مع جميع التكوينات الجديدة من المكونات الإضافية المثبتة. يمكنك تخطي هذه الصفحة بأمان عن طريق تطبيق الإعدادات الافتراضية. سيتم تكوين المكونات الإضافية في الخطوات التالية.

## <a name="2-enable-the-openid-connect-authentication-plugin"></a>2. تمكين المكون الإضافي لمصادقة OpenID Connect

لكي تتصل مكونات Moodle الإضافية بخدمات Microsoft، يجب تشغيل المكون الإضافي لمصادقة OpenID Connect وتكوينه.

1. انتقل إلى **مصادقة** **المكونات الإضافية** >  **لإدارة** >  الموقع ثم حدد **"إدارة المصادقة**".
1. ابحث عن المكون الإضافي لمصادقة **OpenID Connect** وحدد *أيقونة العين* لتشغيله.
1. حدد **إعدادات** المكون الإضافي للتحقق من نقاط نهاية **التخويل** **والرمز المميز** .
    1. يجب أن تكون القيم الافتراضية:
        1. نقطة نهاية التخويل: ``https://login.microsoftonline.com/common/oauth2/authorize``.
        1. نقطة نهاية الرمز المميز: ``https://login.microsoftonline.com/common/oauth2/token``.
1. سجل **URI إعادة التوجيه** لاستخدامه لاحقا.

    > [!NOTE]
    > ليس مطلوبا لجميع مستخدمي Moodle إلى المكون الإضافي لمصادقة OpenID Connect كطريقة مصادقة؛ ومع ذلك، إذا كانوا يستخدمون أساليب مصادقة أخرى، يجب أن تكون حسابات Moodle الخاصة بهم *متصلة* بحسابات Microsoft المقابلة قبل أن يتمكنوا من استخدام ميزات معينة في تكامل Teams، مثل مزامنة ملكية Teams وعضويته.

## <a name="3-configure-the-connection-between-the-microsoft-365-plugins-and-microsoft-services"></a>3. تكوين الاتصال بين مكونات Microsoft 365 الإضافية وخدمات Microsoft

يجب تكوين الاتصال بين مكونات Microsoft 365 الإضافية وخدمات Microsoft قبل أن تتمكن من العمل معا.

> [!NOTE]
> أثناء تكوين التكامل، احتفظ بصفحة تكوين تكامل Microsoft 365 Moodle مفتوحة في علامة تبويب مستعرض منفصلة حيث تحتاج إلى العودة إلى هذه المجموعة من الصفحات خلال العملية.

### <a name="the-teams-for-moodle-set-up-process"></a>عملية إعداد Teams for Moodle

1. إنشاء تطبيق Azure
    1. انتقل إلى **المكونات الإضافية** >  المحلية **لإدارة** >  الموقع ثم حدد **تكامل Microsoft 365**. سيؤدي ذلك إلى فتح صفحة تكوين تكامل Microsoft 365.

    1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعداد** ".

    1. حدد الزر **"تنزيل البرنامج النصي PowerShell** " واحفظه كمجلد ZIP على الكمبيوتر المحلي.

        > [!NOTE]
        > يؤدي تشغيل البرنامج النصي إلى إنشاء تطبيق Azure AD جديد في مستأجر Microsoft 365، الذي يقوم بإعداد عناوين URL والأذونات للرد المطلوبة، ويمنح الأذونات المطلوبة، ويرجع `AppID` `Key`و.
        >
        > يعمل البرنامج النصي PowerShell فقط على أنظمة تشغيل Windows.

    1. قم بإعداد البرنامج النصي PowerShell من ملف ZIP كما يلي:
        1. قم بتنزيل الملف واستخراجه `Moodle-AzureAD-Powershell.zip` .
        1. افتح المجلد المستخرج.
        1. انقر بزر الماوس الأيمن فوق `Moodle-AzureAD-Script.ps1` الملف وحدد **"Properties**".
        1. ضمن علامة التبويب **"عام**" في okno Vlastnosti، حدد خانة `Unblock` الاختيار الموجودة بجانب سمة **الأمان** الموجودة في أسفل النافذة.
        1. حدد **موافق**.
        1. انسخ مسار الدليل إلى المجلد المستخرج.

    1. تشغيل PowerShell كمسؤول:
        1. في Windows، حدد **"ابدأ**".
        1. النوع `PowerShell`.
        1. انقر بزر الماوس الأيمن فوق **Windows PowerShell**.
        1. حدد **"تشغيل كمسؤول**".

    1. انتقل إلى الدليل غير المضغوط عن طريق كتابة `cd .../.../Moodle-AzureAD-Powershell` مكان `.../...` المسار إلى الدليل.

    1. تنفيذ البرنامج النصي PowerShell:
        1. أدخل `./Moodle-AzureAD-Script.ps1`.
        1. عند سؤالك، سجل الدخول إلى حساب مسؤول Microsoft 365 في النافذة المنبثقة.
        1. عند سؤالك، أدخل اسم تطبيق Azure AD، على سبيل المثال، الوظائف الإضافية Moodle أو Moodle.
        1. عند سؤالك، أدخل عنوان URL لخادم Moodle.
        1. عند سؤالك، أدخل عنوان URL للرد المنسوخ من صفحة تكوين المكون الإضافي لمصادقة OpenID Connect. هذا هو أساسا عنوان URL لموقع Moodle الخاص بك، متبوعا ب `\auth\oidc\`.
        1. قد يطلب منك تسجيل الدخول إلى حساب Microsoft 365 مرة أخرى في نافذة منبثقة في العملية. هذا لتوفير موافقة المسؤول على الأذونات المضافة إلى التطبيق لمؤسستك.
        1. عند انتهاء البرنامج النصي من التنفيذ، انسخ **معرف التطبيق (`AppID`)** **ومفتاح التطبيق (`Key`)** الذي أنشأه البرنامج النصي واحفظهما.

1. تعيين تفاصيل تطبيق Azure في Moodle
    1. العودة إلى صفحة تكوين المكون الإضافي لمصادقة OpenID Connect.
    1. الصق `AppID` القيمة في مربع **"معرف التطبيق"** والقيمة `Key` في مربع **المفتاح** ، ثم حدد **"حفظ التغييرات**".

1. تكوين الاتصال بين مكونات Microsoft الإضافية وخدمات Microsoft
    1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعداد** ".
    1. في **أسلوب "اختيار الاتصال**"، حدد **"الوصول إلى التطبيق**"، ثم حدد **"حفظ التغييرات"** مرة أخرى.
    1. بعد تحديث الصفحة، يمكنك الاطلاع على قسم جديد آخر **مسؤول الموافقة & معلومات إضافية**.
        1. حدد **"توفير مسؤول ارتباط الموافقة**"، أدخل بيانات اعتماد المسؤول العام ل Microsoft 365، ثم **اقبل** لمنح الأذونات.
        1. إلى جانب حقل **المستأجر Azure AD**، حدد الزر **"كشف".**
        1. إلى جانب **عنوان URL OneDrive for Business**، حدد الزر **"كشف**".
        1. بعد ملء الحقول، حدد الزر **"حفظ التغييرات"** مرة أخرى.

    1. حدد الزر **"تحديث** " للتحقق من التثبيت. إذا لم يتم الإبلاغ عن أي خطأ في هذه المرحلة، فهذا يعني أن مكونات Microsoft الإضافية يمكنها الاتصال بخادم Microsoft عبر واجهات برمجة تطبيقات Microsoft Graph.

1. تكوين مزامنة المستخدم والدورة التدريبية
    1. مزامنة المستخدمين بين خادم Moodle Azure AD. اعتمادا على بيئتك، يمكنك تحديد خيارات مختلفة خلال هذه المرحلة. لبدء الاستخدام:
        1. من صفحة تكوين تكامل Microsoft 365، حدد علامة التبويب **"إعدادات المزامنة** ".

        1. في إعداد "**مزامنة المستخدمين Azure AD**"، حدد خانات الاختيار التي تنطبق على بيئتك. يجب تحديد الخيارات التالية:  
            ✔ إنشاء حسابات في Moodle للمستخدمين في Azure AD.
           ✔ تحديث جميع الحسابات في Moodle للمستخدمين في Azure AD.

        1. في قسم **تقييد إنشاء المستخدم**، يمكنك إعداد عامل تصفية للحد من Azure AD المستخدمين الذين تمت مزامنتهم إلى Moodle.

        > [!NOTE]
        > ليس من المطلوب تشغيل مزامنة المستخدم؛ ومع ذلك، سيجعل توصيل مستخدمي Moodle بحسابات Microsoft 365 أسهل بكثير.
        >
        > يتم تنفيذ مزامنة المستخدم عن طريق تشغيل **المستخدمين "مزامنة" مع مهمة** مجدولة Azure AD.

    1. في قسم " **مزامنة الدورة التدريبية** "، يمكنك تحديد خيار **تخصيص مزامنة الدورة التدريبية** لتشغيل الإنشاء التلقائي ل Teams لبعض دوراتك التدريبية الموجودة في Moodle أو كلها.

        > [!NOTE]
        > يتم تنفيذ مزامنة الدورة التدريبية عن طريق تشغيل **دورات Sync Moodle التدريبية إلى** المهمة المجدولة من Microsoft Teams.

    1. حفظ التغييرات.

    1. للتحقق من صحة تكوين المزامنة، ستحتاج إلى تشغيل المهام المجدولة يدويا للمرة الأولى، انتقل إلى **المهام المجدولة** **لمهام** > **خادم** >  **إدارة** >  الموقع.

        1. قم بالتمرير لأسفل وابحث عن المهمة "**مزامنة المستخدمين" باستخدام Azure AD** وحدد **"تشغيل الآن**".
            1. سيؤدي ذلك إلى مزامنة Azure AD المستخدمين إلى موقع Moodle وفقا لخيارات مزامنة المستخدم.
        1. بعد ذلك، ابحث عن **دورات Sync Moodle التدريبية لمهمة Microsoft Teams** وحدد **تشغيل الآن**.
            1. ستنشئ هذه المهمة مجموعات لجميع دورات Moodle التدريبية مع تشغيل خيار المزامنة، وكذلك Teams إذا كان يمكن العثور على **مالك الفريق** في الدورة التدريبية.
            1. ستقوم المهمة أيضا بمزامنة مستخدمي Moodle المسجلين في الدورة التدريبية مع Teams كملاك أو أعضاء.
                1. **مالك** الفريق هو مستخدم Moodle الذي
                    1. متصل بحساب Microsoft 365 و AND
                    2. مسجل في الدورة التدريبية، AND
                    3. `local/o365:teamowner` لديه القدرة في سياق الدورة التدريبية.
                1. وبالمثل، **عضو** الفريق هو مستخدم Moodle الذي
                    1. متصل بحساب Microsoft 365 و AND
                    2. مسجل في الدورة التدريبية، AND
                    3. `local/o365:teamember` لديه القدرة في سياق الدورة التدريبية.
                1. دور *المعلم* الافتراضي لديه `local/o365:teamowner` القدرة، ودور *الطالب* الافتراضي لديه `local/o365:teammember` القدرة.

    > [!NOTE]
    > يتم تشغيل المهام المجدولة بواسطة [Moodle Cron](https://docs.moodle.org/400/en/Cron)، والتي تحتاج إلى تكوين لتشغيلها بشكل متكرر. يمكن أن يكون لكل مهمة مجدولة جدول افتراضي، والذي يمكن تخصيصه.
    >
    > * الجدول الافتراضي **لمستخدمي المزامنة مع** Azure AD المهمة هو كل دقيقة.
    > * يكون الجدول الافتراضي **لدورات Sync Moodle التدريبية لمهمة Microsoft Teams** يوميا في الساعة 1 صباحا في المنطقة الزمنية الافتراضية لخادم Moodle.

بعد تثبيت المكونات الإضافية وتكوينها، يمكنك:

* [توزيع Moodle Assistant Bot إلى Azure](/microsoftteams/install-moodle-integration#step-3-deploy-the-moodle-assistant-bot-to-azure).
* [أضف علامات تبويب Moodle إلى فصول Teams](/microsoftteams/install-moodle-integration#step-4-deploy-your-microsoft-teams-app).
* [أضف فصول Teams واجتماعاته إلى Moodle LMS](teams-classes-meetings-with-moodle.md).

## <a name="extra-moodle-plugin-documentation"></a>وثائق المكون الإضافي Extra Moodle

إذا كنت ترغب في مراجعة إرشادات تكامل Microsoft 365 في Moodle وملاحظات الإصدار، فراجع هذه الموارد:

* [وثائق تكامل Microsoft 365 على مستندات Moodle](https://docs.moodle.org/400/en/Microsoft_365).
