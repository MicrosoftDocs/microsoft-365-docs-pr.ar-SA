---
title: تكوين سياسات مكافحة البرامج الضارة
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.localizationpriority: medium
search.appverid:
- MET150
ms.assetid: b0cfc21f-e3c6-41b6-8670-feb2b2e252e5
ms.collection:
- M365-security-compliance
- m365initiative-defender-office365
description: يمكن للمسؤولين التعرف على كيفية عرض سياسات مكافحة البرامج الضارة في Exchange Online Protection (EOP) وإنشاءها وتعديلها وإزالتها.
ms.custom:
- seo-marvel-apr2020
ms.technology: mdo
ms.prod: m365-security
ms.openlocfilehash: 7d332d55b6a481208ce4ca7f1c18699589c4e2c0
ms.sourcegitcommit: a9266e4e7470e8c1e8afd31fef8d266f7849d781
ms.translationtype: MT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/09/2022
ms.locfileid: "63566757"
---
# <a name="configure-anti-malware-policies-in-eop"></a>تكوين سياسات مكافحة البرامج الضارة في EOP

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]

**ينطبق على**
- [Exchange Online Protection](exchange-online-protection-overview.md)
- [Microsoft Defender Office 365 الخطة 1 الخطة 2](defender-for-office-365.md)
- [Microsoft 365 Defender](../defender/microsoft-365-defender.md)

في Microsoft 365 المؤسسات التي بها علب بريد في Exchange Online أو مؤسسات Exchange Online Protection مستقلة (EOP) بدون علب بريد Exchange Online، يتم حماية رسائل البريد الإلكتروني تلقائيا من البرامج الضارة بواسطة EOP. يستخدم EOP سياسات مكافحة البرامج الضارة لإعدادات الحماية من البرامج الضارة. لمزيد من المعلومات، راجع [الحماية من البرامج الضارة](anti-malware-protection.md).

يمكن للمسؤولين عرض نهج مكافحة البرامج الضارة الافتراضي وتحريره وتكوينه (وليس حذفه) لتلبية احتياجات مؤسساتهم. لمزيد من الخصوصية، يمكنك أيضا إنشاء سياسات مخصصة لمكافحة البرامج الضارة تنطبق على مستخدمين معينين أو مجموعات أو مجالات معينة في مؤسستك. وتأخذ النهج المخصصة دوما الأسبقية على النهج الافتراضي، ولكن يمكنك تغيير أولوية النهج المخصصة (ترتيب التشغيل).

يمكنك تكوين سياسات مكافحة البرامج الضارة في مدخل Microsoft 365 Defender أو في PowerShell (Exchange Online PowerShell ل Microsoft 365 المؤسسات التي بها علب بريد في Exchange Online؛ EOP PowerShell مستقل ل المؤسسات التي لا تعمل Exchange Online علب البريد).

## <a name="what-do-you-need-to-know-before-you-begin"></a>ما الذي تحتاج إلى معرفته قبل البدء؟

- يمكنك فتح Microsoft 365 Defender في <https://security.microsoft.com>. انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

- للاتصال ب PowerShell Exchange Online، راجع الاتصال [إلى Exchange Online PowerShell](/powershell/exchange/connect-to-exchange-online-powershell). للاتصال ب EOP PowerShell مستقل، راجع الاتصال [Exchange Online Protection PowerShell](/powershell/exchange/connect-to-exchange-online-protection-powershell).

- يجب تعيين أذونات لك في Exchange Online قبل أن تتمكن  من تنفيذ الإجراءات في هذه المقالة:
  - لإضافة سياسات مكافحة البرامج الضارة وتعديلها وحذفها، يجب أن تكون عضوا في مجموعات دور مسؤول إدارة **المؤسسة أو مسؤول** الأمان.
  - للوصول للقراءة فقط إلى سياسات مكافحة البرامج الضارة، يجب أن تكون عضوا في مجموعات دور القارئ العام أو  قارئ الأمان.

  لمزيد من المعلومات، راجع [الأذونات في Exchange Online](/exchange/permissions-exo/permissions-exo).

  **ملاحظات**:

  - توفر إضافة مستخدمين إلى دور Azure Active Directory المناظر في مركز مسؤولي Microsoft 365 للمستخدمين الأذونات والأذونات المطلوبة للميزات الأخرى  في Microsoft 365. لمزيد من المعلومات، راجع [حول أدوار المسؤولين](../../admin/add-users/about-admin-roles.md).
  - توفر **أيضا مجموعة دور "** إدارة [المؤسسات Exchange Online](/Exchange/permissions-exo/permissions-exo#role-groups) طريقة العرض فقط" إمكانية الوصول للقراءة فقط إلى الميزة.

- للحصول على الإعدادات الموصى بها لنهج مكافحة البرامج الضارة، راجع إعدادات نهج مكافحة البرامج الضارة [في EOP](recommended-settings-for-eop-and-office365.md#eop-anti-malware-policy-settings).

## <a name="use-the-microsoft-365-defender-portal-to-create-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لإنشاء سياسات مكافحة البرامج الضارة

يؤدي إنشاء نهج مخصص لمكافحة البرامج الضارة في مدخل Microsoft 365 Defender إلى إنشاء قاعدة عامل تصفية البرامج الضارة ون نهج تصفية البرامج الضارة المقترنة به في الوقت نفسه باستخدام نفس الاسم لكل منهما.

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، انقر فوق ![إنشاء أيقونة.](../../media/m365-cc-sc-create-icon.png) **إنشاء**.

3. يتم فتح معالج النهج. في صفحة **تسمية النهج** ، قم بتكوين هذه الإعدادات:
   - **الاسم**: أدخل اسما فريدا ووصفيا النهج.
   - **الوصف**: أدخل وصفا اختياريا النهج.

   عند الانتهاء، انقر فوق **التالي**.

4. في **صفحة المستخدمون والمجالات** التي تظهر، حدد المستلمين الداخليين الذين ينطبق النهج علىهم (شروط المستلمين):
   - **المستخدمون**: علب البريد المحددة أو مستخدمي البريد أو جهات اتصال البريد المحددة في مؤسستك.
   - **المجموعات**: مجموعات التوزيع المحددة أو مجموعات الأمان التي تم تمكين البريد Microsoft 365 في مؤسستك.
   - **المجالات**: جميع المستلمين في المجالات المقبولة [المحددة](/exchange/mail-flow-best-practices/manage-accepted-domains/manage-accepted-domains) في مؤسستك.

   انقر في المربع المناسب، وابدأ بكتابة قيمة، وحدد القيمة التي تريدها من النتائج. كرر هذه العملية قدر ما يلزم. لإزالة قيمة موجودة، انقر فوق إزالة ![أيقونة إزالة.](../../media/m365-cc-sc-remove-selection-icon.png) بجانب القيمة.

   بالنسبة للمستخدمين أو المجموعات، يمكنك استخدام معظم المعرف (الاسم واسم العرض واسم المستعار وعنوان البريد الإلكتروني واسم الحساب وغير ذلك)، ولكن يظهر اسم العرض المقابل في النتائج. بالنسبة للمستخدمين، أدخل النجمة (\*) بمفردها لرؤية كل القيم المتوفرة.

   تستخدم القيم المتعددة في نفس الشرط منطق OR (على سبيل المثال _\<recipient1\>_ ، أو _\<recipient2\>_). تستخدم الشروط المختلفة منطق AND (على سبيل المثال _\<recipient1\>_ ، و _\<member of group 1\>_).

   - **استبعاد هؤلاء المستخدمين** والمجموعات والمجالات: لإضافة استثناءات للمستلمين الداخليين الذين يطبقهم النهج على (استثناءات غير موجودة)، حدد هذا الخيار وتكوين الاستثناءات. تشبه الإعدادات والسلوك الشروط تماما.

   عند الانتهاء، انقر فوق **التالي**.

5. في **الصفحة إعدادات الحماية** التي تظهر، قم بتكوين الإعدادات التالية:

   - **تمكين عامل تصفية** المرفقات الشائع: إذا حددت هذا الخيار، يتم التعامل مع الرسائل التي بها المرفقات المحددة كبرامج ضارة، كما يتم عزلها تلقائيا. يمكنك تعديل القائمة الافتراضية عن طريق تحديد **تخصيص أنواع الملفات**.

   - **تمكين الازدحام** التلقائي للبرامج الضارة بدون ساعة: إذا حددت هذا الخيار، فإن ZAP يفحص رسائل البرامج الضارة التي تم تسليمها بالفعل. لمزيد من المعلومات، راجع إزالة تلقائية [لمدة ساعة (ZAP) في](zero-hour-auto-purge.md) Exchange Online. حدد إحدى هذه القيم:

   - **نهج الفحص**: حدد نهج الفحص الذي ينطبق على الرسائل التي تم فحصها كبرامج ضارة. تحدد سياسات الفحص ما يمكن للمستخدمين القيام به للرسائل المعزولة، وما إذا كان المستخدمون يتلقون إعلامات الفحص أم لا. لمزيد من المعلومات، راجع [سياسات الفحص](quarantine-policies.md).

     تعني القيمة الفارغة استخدام نهج الفحص الافتراضي (AdminOnlyAccessPolicy للكشف عن البرامج الضارة). عندما تقوم لاحقا بتحرير نهج مكافحة البرامج الضارة أو عرض الإعدادات، يظهر اسم نهج الفحص الافتراضي. لمزيد من المعلومات حول سياسات الفحص الافتراضية المستخدمة لتصفية الحماية المعتمدة، راجع [هذا الجدول](quarantine-policies.md#step-2-assign-a-quarantine-policy-to-supported-features).

   - **إعلام المستلمين عند فحص الرسائل كبرامج ضارة**:
     - إذا حددت هذا الخيار، يتم عزل الرسالة. يتم تسليم نسخة من الرسالة إلى المستلمين، ولكن يتم استبدال كل المرفقات (وليس مرفقات البرامج الضارة فقط) بملف نصي واحد يسمى تنبيه البرامج **الضارة** Text.txt.

       يتم وصف النص الافتراضي في الملف النصي البديل في [سياسات مكافحة البرامج الضارة](anti-malware-protection.md#anti-malware-policies). لاستخدام نص مخصص بدلا من ذلك، أدخل النص في المربع **نص إعلام مخصص للمستلم** .

     - إذا لم تحدد هذا الخيار، فيتم عزل الرسالة بصمت.

     > [!NOTE]
     > بغض النظر عن الخيار الذي تحدده، يحدد نهج الفحص ما إذا كان المستلمون يتلقون إعلامات الفحص (إعلامات البريد الإلكتروني للرسائل التي تم فحصها كبرامج ضارة).

   - **إعلامات المرسل**: حدد لا شيء أو أحد هذين الخيارين أو كليهما:
       - **إعلام المرسلين الداخليين عند فحص** الرسائل كبرامج ضارة: يوجد مرسل داخلي داخل المؤسسة.
       - **إعلام المرسلين الخارجيين عند عزل** الرسائل كبرامج ضارة: يوجد مرسل خارجي خارج المؤسسة.

   - **إعلامات المسؤول**: حدد بلا أو أحد هذين الخيارين أو كليهما:
       - **إعلام المسؤول بالرسائل** غير المرسلة من المرسلين الداخليين: إذا حددت هذا الخيار، أدخل عنوان بريد إلكتروني لإعلام في مربع عنوان  البريد الإلكتروني للمسؤول الذي يظهر.
       - **إعلام المسؤول بالرسائل** غير المرسلة من مرسلين خارجيين: إذا حددت هذا الخيار، أدخل عنوان بريد إلكتروني لإعلام في مربع  عنوان البريد الإلكتروني للمسؤول الذي يظهر.

     > [!NOTE]
     > يتم إرسال إعلامات المسؤول فقط _للمرفقات_ المصنفة كبرامج ضارة.

   - **تخصيص الإعلامات**: تحل هذه الإعدادات محل نص الإعلام الافتراضي المستخدم للمرسلين أو المسؤولين. لمزيد من المعلومات حول القيم الافتراضية، راجع [سياسات مكافحة البرامج الضارة](anti-malware-protection.md#anti-malware-policies).
       - استخدام نص إعلام **مخصص: إذا** حددت هذا الخيار، يجب استخدام مربعي العنوان من الاسم  ومن لتحديد اسم  المرسل وعنوان بريده الإلكتروني المستخدمين في رسالة الإعلام المخصصة.
       - تخصيص الإعلامات للرسائل الواردة من المرسلين  الداخليين **: إذا** اخترت إعلام المرسلين أو المسؤولين بالرسائل غير القابلة للرسالة الواردة من مرسلين داخليين، يجب  استخدام مربعي الموضوع والرسائل لتحديد موضوع رسالة الإعلام المخصصة ورسالتها.
       - تخصيص الإعلامات للرسائل الواردة من مرسلين  خارجيين **: إذا** اخترت إعلام المرسلين أو المسؤولين بالرسائل غير القابلة للرسالة الواردة من مرسلين خارجيين، يجب استخدام  مربعي الموضوع والرسائل لتحديد موضوع رسالة الإعلام المخصصة ورسالتها.

   عند الانتهاء، انقر فوق **التالي**.

6. على الصفحة **مراجعة** التي تظهر، راجع الإعدادات. يمكنك تحديد **تحرير** في كل مقطع لتعديل الإعدادات ضمن المقطع. أو يمكنك النقر فوق **الخلف** أو تحديد الصفحة المحددة في المعالج.

   عند الانتهاء، انقر فوق **إرسال**.

7. على صفحة التأكيد التي تظهر، انقر فوق **تم**.

## <a name="use-the-microsoft-365-defender-portal-to-view-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لعرض سياسات مكافحة البرامج الضارة

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج** الضارة، يتم عرض الخصائص التالية في قائمة سياسات مكافحة البرامج الضارة:
   - **الاسم**
   - **الحالة**
   - **الأولوية**

3. عند تحديد نهج بالنقر فوق الاسم، يتم عرض إعدادات النهج في قائمة منسقة.

## <a name="use-the-microsoft-365-defender-portal-to-modify-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لتعديل سياسات مكافحة البرامج الضارة

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج** الضارة، حدد نهج من القائمة بالنقر فوق الاسم.

3. في قائمة تفاصيل النهج التي تظهر، حدد **تحرير** في كل مقطع لتعديل الإعدادات ضمن المقطع. لمزيد من المعلومات حول الإعدادات، راجع المقطع السابق استخدام [](#use-the-microsoft-365-defender-portal-to-create-anti-malware-policies) Microsoft 365 Defender لإنشاء سياسات مكافحة البرامج الضارة في هذه المقالة.

   بالنسبة إلى نهج مكافحة البرامج الضارة الافتراضي، لا  يتوفر قسم المستخدمون والمجموعات والمجالات (ينطبق النهج على الجميع)، ولا يمكنك إعادة تسمية النهج.

لتمكين نهج أو تعطيله أو تعيين ترتيب أولوية النهج، راجع المقاطع التالية.

### <a name="enable-or-disable-custom-anti-malware-policies"></a>تمكين أو تعطيل سياسات مكافحة البرامج الضارة المخصصة

لا يمكنك تعطيل نهج مكافحة البرامج الضارة الافتراضي.

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، حدد نهج مخصص من القائمة بالنقر فوق الاسم.

3. في أعلى قائمة تفاصيل النهج التي تظهر، سترى إحدى القيم التالية:
   - **إيقاف تشغيل النهج**: ل تشغيل النهج، انقر فوق أيقونة ![تشغيل.](../../media/m365-cc-sc-turn-on-off-icon.png) **قم تشغيل** .
   - **تشغيل النهج**: إيقاف تشغيل النهج، انقر فوق ![أيقونة إيقاف التشغيل.](../../media/m365-cc-sc-turn-on-off-icon.png) **إيقاف التشغيل**.

4. في مربع حوار التأكيد الذي يظهر، انقر فوق **تشغيل** أو **إيقاف تشغيل**.

5. انقر **فوق** إغلاق في مناصة تفاصيل النهج.

عند العودة إلى صفحة النهج الرئيسية، ستكون  قيمة حالة النهج في **وضع التشغيل** أو **إيقاف التشغيل**.

### <a name="set-the-priority-of-custom-anti-malware-policies"></a>تعيين أولوية سياسات مكافحة البرامج الضارة المخصصة

بشكل افتراضي، يتم منح سياسات مكافحة البرامج الضارة أولوية تستند إلى الترتيب الذي تم إنشاؤها به (تكون السياسات الجديدة ذات أولوية أقل من تلك التي يتم تعيينها إلى سياسات قديمة). يشير رقم الأولوية الأدنى إلى أولوية أعلى بالنسبة إلى النهج (0 هو الأعلى)، كما تتم معالجة النهج وفقا ترتيب الأولوية (تتم معالجة نهج الأولوية العليا قبل النهج ذات الأولوية الدنيا). لا يمكن أن تكون الأولوية نفسها لنهجين، وتتوقف معالجة النهج بعد تطبيق النهج الأول.

لتغيير أولوية النهج، انقر فوق زيادة الأولوية أو إنقاص الأولوية في  خصائص النهج (لا يمكنك تعديل رقم الأولوية مباشرة في مدخل Microsoft 365 Defender).  لا يكون تغيير أولوية النهج منطقيا إلا إذا كان لديك نهج متعددة.

 **ملاحظات**:

- في Microsoft 365 Defender، يمكنك فقط تغيير أولوية نهج مكافحة البرامج الضارة بعد إنشائه. في PowerShell، يمكنك تجاوز الأولوية الافتراضية عند إنشاء قاعدة تصفية البرامج الضارة (التي يمكن أن تؤثر على أولوية القواعد الموجودة).
- تتم معالجة نهج مكافحة البرامج الضارة بالترتيب الذي يتم عرضه فيه (النهج الأول له **القيمة الأولوية** 0). نهج مكافحة البرامج الضارة الافتراضي له قيمة الأولوية **الأقل**، ولا يمكنك تغييرها.

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، حدد نهج مخصص من القائمة بالنقر فوق الاسم.

3. في أعلى القائمة العلوية التفاصيل الخاصة ب النهج التي تظهر، سترى زيادة الأولوية أو إنقاص  الأولوية استنادا إلى  قيمة الأولوية الحالية وعدد النهج المخصصة:
   - يتوفر النهج الذي به **القيمة الأولوية** **0** فقط خيار **إنقاص** الأولوية.
   - يتوفر النهج الذي به أقل قيمة **أولوية** (على سبيل المثال **، 3**) خيار **زيادة** الأولوية فقط.
   - إذا كان لديك ثلاثة سياسات أو أكثر، فإن الخيارات المتوفرة بين القيم ذات الأولوية الأعلى والأدنى هي الخيارات "زيادة  الأولوية" و"إنقاص الأولوية".

   انقر ![فوق زيادة أيقونة الأولوية.](../../media/m365-cc-sc-increase-icon.png) **زيادة الأولوية** أو ![أيقونة إنقاص الأولوية](../../media/m365-cc-sc-decrease-icon.png) **إنقاص** الأولوية لتغيير **قيمة الأولوية** .

4. عند الانتهاء، انقر فوق **إغلاق** في منتهى تفاصيل النهج.

## <a name="use-the-microsoft-365-defender-portal-to-remove-custom-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لإزالة سياسات مكافحة البرامج الضارة المخصصة

عند استخدام مدخل Microsoft 365 Defender لإزالة نهج مخصص لمكافحة البرامج الضارة، يتم حذف قاعدة تصفية البرامج الضارة ونهاية تصفية البرامج الضارة المطابقة. لا يمكنك إزالة نهج مكافحة البرامج الضارة الافتراضي.

1. في مدخل  Microsoft 365 Defender،   <https://security.microsoft.com>انتقل إلى البريد الإلكتروني **&** \> \> \> سياسات التعاون & قواعد الحماية من البرامج الضارة في **القسم** "سياسات". انتقل مباشرة إلى صفحة مكافحة **البرامج** الضارة، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة،** حدد نهج مخصص من القائمة بالنقر فوق الاسم.

3. في أعلى قائمة تفاصيل النهج التي تظهر، انقر فوق أيقونة ![المزيد من الإجراءات.](../../media/m365-cc-sc-more-actions-icon.png) **المزيد من الإجراءات** \> ![أيقونة حذف النهج](../../media/m365-cc-sc-delete-icon.png) **حذف النهج**.

4. في مربع حوار التأكيد الذي يظهر، انقر فوق **نعم**.

## <a name="use-exchange-online-powershell-or-standalone-eop-powershell-to-configure-anti-malware-policies"></a>استخدام Exchange Online PowerShell أو EOP PowerShell مستقل لتكوين سياسات مكافحة البرامج الضارة

لمزيد من المعلومات حول سياسات مكافحة البريد العشوائي في PowerShell، راجع سياسات مكافحة البرامج الضارة في Microsoft 365 Defender [في مقابل PowerShell](anti-malware-protection.md#anti-malware-policies-in-the-microsoft-365-defender-portal-vs-powershell).

### <a name="use-powershell-to-create-anti-malware-policies"></a>استخدام PowerShell لإنشاء سياسات مكافحة البرامج الضارة

إن عملية إنشاء نهج مكافحة البرامج الضارة في PowerShell هي عملية من خطوتين:

1. إنشاء نهج تصفية البرامج الضارة.
2. أنشئ قاعدة تصفية البرامج الضارة التي تحدد نهج تصفية البرامج الضارة الذي تنطبق عليه القاعدة.

 **ملاحظات**:

- يمكنك إنشاء قاعدة جديدة لتصفية البرامج الضارة وتعيين نهج عامل تصفية برامج ضارة موجود وغير مفروق لها. لا يمكن تقترن قاعدة تصفية البرامج الضارة بأكثر من نهج واحد لتصفية البرامج الضارة.
- هناك إعدادان يمكنك تكوينه على نهج جديدة لمكافحة البرامج الضارة في PowerShell غير متوفرين في مدخل Microsoft 365 Defender إلا بعد إنشاء النهج:
  - قم بإنشاء النهج الجديد ك معطل (_ممكن_ `$false` على **cmdlet New-MalwareFilterRule** ).
  - تعيين أولوية النهج أثناء الإنشاء (_الأولوية_ _\<Number\>_) على **cmdlet New-MalwareFilterRule** ).
- لن يكون نهج تصفية البرامج الضارة الجديد الذي تقوم بإنشاءه في PowerShell مرئيا في مدخل Microsoft 365 Defender حتى تقوم بتعيين النهج إلى قاعدة تصفية البرامج الضارة.

#### <a name="step-1-use-powershell-to-create-a-malware-filter-policy"></a>الخطوة 1: استخدام PowerShell لإنشاء نهج تصفية البرامج الضارة

**ملاحظة**: في الخدمة المستندة إلى السحابة، _قيم معلمة_ `DeleteMessage`الإجراء ، `DeleteAttachmentAndUseDefaultAlert`ولا `DeleteAttachmentAndUseCustomAlert` تحذف الرسائل. بدلا من ذلك، يتم دائما عزل الرسائل. لمزيد من المعلومات حول استرداد الرسائل المعزولة، راجع إدارة الرسائل والملفات المعزولة [كمسؤول في EOP](manage-quarantined-messages-and-files.md).

لإنشاء نهج تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
New-MalwareFilterPolicy -Name "<PolicyName>" [-Action <DeleteMessage | DeleteAttachmentAndUseDefaultAlert | DeleteAttachmentAndUseCustomAlert>] [-AdminDisplayName "<OptionalComments>"] [-CustomNotifications <$true | $false>] [<Inbound notification options>] [<Outbound notification options>] [-QuarantineTag <QuarantineTagName>]
```

ينشئ هذا المثال نهج تصفية البرامج الضارة الجديد المسمى "نهج تصفية البرامج الضارة من Contoso" باستخدام هذه الإعدادات:

- عزل الرسائل التي تحتوي على برامج ضارة دون إعلام المستلمين (لا نستخدم معلمة _الإجراء_ ، والقيمة الافتراضية هي `DeleteMessage`).
- لا تخطر مرسل الرسالة عند اكتشاف البرامج الضارة في الرسالة (لا نستخدم _معلمات EnableExternalSenderNotifications_ أو _EnableInternalSenderNotifications_ ، والقيمة الافتراضية لكل منهما هي `$false`).
- أعلم المسؤول admin@contoso.com عند اكتشاف البرامج الضارة في رسالة من مرسل داخلي.
- يتم استخدام [نهج الفحص الافتراضي](quarantine-policies.md) للكشف عن البرامج الضارة (لا نستخدم المعلمة _QuarantineTag_ ).

```PowerShell
New-MalwareFilterPolicy -Name "Contoso Malware Filter Policy" -EnableInternalSenderAdminNotifications $true -InternalSenderAdminAddress admin@contoso.com
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [New-MalwareFilterPolicy](/powershell/module/exchange/new-malwarefilterpolicy).

#### <a name="step-2-use-powershell-to-create-a-malware-filter-rule"></a>الخطوة 2: استخدام PowerShell لإنشاء قاعدة تصفية البرامج الضارة

لإنشاء قاعدة تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
New-MalwareFilterRule -Name "<RuleName>" -MalwareFilterPolicy "<PolicyName>" <Recipient filters> [<Recipient filter exceptions>] [-Comments "<OptionalComments>"]
```

ينشئ هذا المثال قاعدة جديدة لتصفية البرامج الضارة تسمى "مستلمو Contoso" باستخدام هذه الإعدادات:

- يقترن نهج تصفية البرامج الضارة المسمى "نهج تصفية البرامج الضارة من Contoso" بالقاعدة.
- تنطبق القاعدة على المستلمين في contoso.com المجال.

```PowerShell
New-MalwareFilterRule -Name "Contoso Recipients" -MalwareFilterPolicy "Contoso Malware Filter Policy" -RecipientDomainIs contoso.com
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [New-MalwareFilterRule](/powershell/module/exchange/new-malwarefilterrule).

### <a name="use-powershell-to-view-malware-filter-policies"></a>استخدام PowerShell لعرض سياسات تصفية البرامج الضارة

لإرجاع قائمة ملخصة بكل سياسات تصفية البرامج الضارة، يمكنك تشغيل هذا الأمر:

```PowerShell
Get-MalwareFilterPolicy
```

لإرجاع معلومات مفصلة حول نهج محدد لتصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Get-MalwareFilterPolicy -Identity "<PolicyName>" | Format-List [<Specific properties to view>]
```

يرجع هذا المثال كل قيم خاصية نهج تصفية البرامج الضارة المسمى المديرون التنفيذيون.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List
```

يرجع هذا المثال الخصائص المحددة فقط لنفس النهج.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List Action,AdminDisplayName,CustomNotifications,Enable*Notifications
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Get-MalwareFilterPolicy](/powershell/module/exchange/get-malwarefilterpolicy).

### <a name="use-powershell-to-view-malware-filter-rules"></a>استخدام PowerShell لعرض قواعد تصفية البرامج الضارة

لإرجاع قائمة ملخصة بكل قواعد تصفية البرامج الضارة، يمكنك تشغيل هذا الأمر:

```PowerShell
Get-MalwareFilterRule
```

لتصفية القائمة حسب القواعد التي تم تمكينها أو تعطيلها، يمكنك تشغيل الأوامر التالية:

```PowerShell
Get-MalwareFilterRule -State Disabled
```

```PowerShell
Get-MalwareFilterRule -State Enabled
```

لإرجاع معلومات مفصلة حول قاعدة معينة لتصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Get-MalwareFilterRule -Identity "<RuleName>" | Format-List [<Specific properties to view>]
```

يرجع هذا المثال كافة قيم الخاصية لقاعدة تصفية البرامج الضارة المسماة المديرون التنفيذيون.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List
```

يرجع هذا المثال الخصائص المحددة للقاعدة نفسها فقط.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List Name,Priority,State,MalwareFilterPolicy,*Is,*SentTo,*MemberOf
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Get-MalwareFilterRule](/powershell/module/exchange/get-malwarefilterrule).

### <a name="use-powershell-to-modify-malware-filter-policies"></a>استخدام PowerShell لتعديل سياسات تصفية البرامج الضارة

بالإضافة إلى العناصر التالية، تتوفر الإعدادات نفسها عند تعديل نهج تصفية البرامج الضارة في PowerShell كما هو موضح في الخطوة [1: استخدام PowerShell](#step-1-use-powershell-to-create-a-malware-filter-policy) لإنشاء مقطع نهج تصفية البرامج الضارة المذكور سابقا في هذه المقالة.

- لا يتوفر _مفتاح التبديل MakeDefault_ الذي يحول النهج المحدد إلى النهج الافتراضي (المطبق على الجميع، الأولوية الأدنى غير القابلة للتعديل، ولا يمكنك حذفه) إلا عند تعديل نهج تصفية البرامج الضارة في PowerShell.
- لا يمكنك إعادة تسمية نهج تصفية البرامج الضارة (لا يوجد في **الأمر Set-MalwareFilterPolicy** cmdlet _معلمة_ الاسم). عند إعادة تسمية نهج مكافحة البرامج الضارة في Microsoft 365 Defender، تقوم بإعادة تسمية قاعدة عامل تصفية البرامج _الضارة فقط_.

لتعديل نهج تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Set-MalwareFilterPolicy -Identity "<PolicyName>" <Settings>
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Set-MalwareFilterPolicy](/powershell/module/exchange/set-malwarefilterpolicy).

> [!NOTE]
> للحصول على إرشادات مفصلة لتحديد نهج [](quarantine-policies.md) الفحص لاستخدامه في نهج تصفية البرامج الضارة، راجع استخدام [PowerShell](quarantine-policies.md#anti-malware-policies-in-powershell) لتحديد نهج الفحص في نهج مكافحة البرامج الضارة.

### <a name="use-powershell-to-modify-malware-filter-rules"></a>استخدام PowerShell لتعديل قواعد تصفية البرامج الضارة

الإعداد الوحيد الذي لا يتوفر عند تعديل قاعدة تصفية البرامج الضارة في PowerShell هو المعلمة _Enabled_ التي تسمح لك بإنشاء قاعدة معطلة. لتمكين قواعد تصفية البرامج الضارة الموجودة أو تعطيلها، راجع القسم التالي.

وبخلاف ذلك، لن تتوفر أي إعدادات إضافية عند تعديل قاعدة تصفية البرامج الضارة في PowerShell. تتوفر الإعدادات نفسها عند إنشاء قاعدة كما هو موضح في الخطوة [2: استخدام PowerShell](#step-2-use-powershell-to-create-a-malware-filter-rule) لإنشاء مقطع قاعدة لتصفية البرامج الضارة سابقا في هذه المقالة.

لتعديل قاعدة تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" <Settings>
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Set-MalwareFilterRule](/powershell/module/exchange/set-malwarefilterrule).

### <a name="use-powershell-to-enable-or-disable-malware-filter-rules"></a>استخدام PowerShell لتمكين قواعد تصفية البرامج الضارة أو تعطيلها

يؤدي تمكين قاعدة تصفية البرامج الضارة أو تعطيلها في PowerShell إلى تمكين نهج مكافحة البرامج الضارة بالكامل أو تعطيله (قاعدة تصفية البرامج الضارة ونمط تصفية البرامج الضارة المعين). لا يمكنك تمكين نهج مكافحة البرامج الضارة الافتراضي أو تعطيله (يتم تطبيقه دائما على جميع المستلمين).

لتمكين قاعدة تصفية البرامج الضارة أو تعطيلها في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
<Enable-MalwareFilterRule | Disable-MalwareFilterRule> -Identity "<RuleName>"
```

يعطل هذا المثال قاعدة تصفية البرامج الضارة المسماة قسم التسويق.

```PowerShell
Disable-MalwareFilterRule -Identity "Marketing Department"
```

يمكن هذا المثال القاعدة نفسها.

```PowerShell
Enable-MalwareFilterRule -Identity "Marketing Department"
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمات، راجع [Enable-MalwareFilterRule](/powershell/module/exchange/enable-malwarefilterrule) و [Disable-MalwareFilterRule](/powershell/module/exchange/disable-malwarefilterrule).

### <a name="use-powershell-to-set-the-priority-of-malware-filter-rules"></a>استخدام PowerShell لتعيين أولوية قواعد تصفية البرامج الضارة

إن أعلى قيمة أولوية يمكنك تعيينها على قاعدة هي 0. تعتمد أقل قيمة يمكنك تعيينها على عدد القواعد. على سبيل المثال، إذا كان لديك خمس قواعد، يمكنك استخدام قيم الأولوية من 0 إلى 4. قد يكون لتغيير أولوية قاعدة موجودة تأثير تتالي على قواعد أخرى. على سبيل المثال، إذا كان لديك خمس قواعد مخصصة (الأولويات من 0 إلى 4)، ثم قمت بتغيير أولوية القاعدة إلى 2، يتم تغيير القاعدة الموجودة ذات الأولوية 2 إلى الأولوية 3، وتتغير القاعدة ذات الأولوية 3 إلى الأولوية 4.

لتعيين أولوية قاعدة تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة التالي:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" -Priority <Number>
```

يحدد هذا المثال أولوية القاعدة المسماة قسم التسويق إلى 2. يتم تقليل كل القواعد الموجودة التي لها أولوية أقل من أو تساوي 2 بمقدار 1 (يتم زيادة أرقام أولوياتها بمقدار 1).

```PowerShell
Set-MalwareFilterRule -Identity "Marketing Department" -Priority 2
```

**ملاحظات**:

- لتعيين أولوية قاعدة جديدة عند إنشائها، استخدم المعلمة _Priority_ على **Cmdlet New-MalwareFilterRule** بدلا من ذلك.
- لا يوجد في نهج تصفية البرامج الضارة الافتراضي قاعدة تصفية برامج ضارة مقابلة، كما أنه دائما ما يكون له أقل قيمة أولوية غير قابلة لل **تعديل**.

### <a name="use-powershell-to-remove-malware-filter-policies"></a>استخدام PowerShell لإزالة سياسات تصفية البرامج الضارة

عند استخدام PowerShell لإزالة نهج تصفية البرامج الضارة، لا تتم إزالة قاعدة تصفية البرامج الضارة المقابلة.

لإزالة نهج تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
Remove-MalwareFilterPolicy -Identity "<PolicyName>"
```

يزيل هذا المثال نهج تصفية البرامج الضارة المسمى قسم التسويق.

```PowerShell
Remove-MalwareFilterPolicy -Identity "Marketing Department"
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Remove-MalwareFilterPolicy](/powershell/module/exchange/remove-malwarefilterpolicy).

### <a name="use-powershell-to-remove-malware-filter-rules"></a>استخدام PowerShell لإزالة قواعد تصفية البرامج الضارة

عند استخدام PowerShell لإزالة قاعدة تصفية البرامج الضارة، لن تتم إزالة نهج تصفية البرامج الضارة المطابقة.

لإزالة قاعدة تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
Remove-MalwareFilterRule -Identity "<PolicyName>"
```

يزيل هذا المثال قاعدة تصفية البرامج الضارة المسماة قسم التسويق.

```PowerShell
Remove-MalwareFilterRule -Identity "Marketing Department"
```

للحصول على بناء الجملة المفصل ومعلومات المعلمة، راجع [Remove-MalwareFilterRule](/powershell/module/exchange/remove-malwarefilterrule).

## <a name="how-do-you-know-these-procedures-worked"></a>كيف يمكنك معرفة كيفية عمل هذه الإجراءات؟

### <a name="use-the-eicartxt-file-to-verify-your-anti-malware-policy-settings"></a>استخدم ملف EICAR.TXT للتحقق من إعدادات نهج مكافحة البرامج الضارة

> [!IMPORTANT]
> ملف EICAR.TXT هو ليس فيروسا. لقد طور "المؤسسة الأوروبية لأبحاث مكافحة الفيروسات على الكمبيوتر" (EICAR) هذا الملف لاختبار إعدادات تثبيتات مكافحة الفيروسات وإعداداتها بأمان.

1. افتح المفكرة ولصق النص التالي في ملف فارغ:

   ```Text
   X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*
   ```

   تأكد من أن هذه هي الأحرف النصية الوحيدة في الملف. يجب أن يكون حجم الملف 68 بايت.

2. احفظ الملف EICAR.TXT

   في برنامج مكافحة الفيروسات لسطح المكتب، تأكد من استبعاد EICAR.TXT من الفحص (وإلا، سيتم فحص الملف).

3. أرسل رسالة بريد إلكتروني تحتوي على ملف EICAR.TXT كمرفق، باستخدام عميل بريد إلكتروني لن يقوم بحظر الملف تلقائيا، واستخدام خدمة بريد إلكتروني لا تقوم تلقائيا بحظر البريد العشوائي الصادر. استخدم إعدادات نهج مكافحة البرامج الضارة لتحديد السيناريوهات التالية لاختبار:
   - إرسال بريد إلكتروني من علبة بريد داخلية إلى مستلم داخلي.
   - البريد الإلكتروني من علبة بريد داخلية إلى مستلم خارجي.
   - البريد الإلكتروني من علبة بريد خارجية إلى مستلم داخلي.

4. تحقق من أن الرسالة تم فحصها، وتحقق من نتائج إعلام المستلم والمرسل استنادا إلى إعدادات نهج مكافحة البرامج الضارة. على سبيل المثال:
   - لا يتم إعلام المستلمين، أو يتلقى المستلمون الرسالة الأصلية مع EICAR.TXT مرفق البرامج الضارة Text.txtالذي يحتوي على النص الافتراضي أو **** المخصص.
   - يتم إعلام المرسلين الداخليين أو الخارجيين بالرسائل الإعلامية الافتراضية أو المخصصة.
   - يتم إعلام عنوان البريد الإلكتروني للمسؤول الذي حددته لمرسلي الرسائل الداخليين أو الخارجيين، مع رسائل الإعلام الافتراضية أو المخصصة.

5. احذف EICAR.TXT بعد اكتمال الاختبار (حتى لا ينزعج المستخدمون الآخرين بشكل غير داع منه).
