---
title: تكوين نهج مكافحة البرامج الضارة
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.localizationpriority: medium
search.appverid:
- MET150
ms.assetid: b0cfc21f-e3c6-41b6-8670-feb2b2e252e5
ms.collection:
- M365-security-compliance
- m365initiative-defender-office365
description: يمكن للمسؤولين معرفة كيفية عرض نهج مكافحة البرامج الضارة وإنشاءها وتعديلها وإزالتها في Exchange Online Protection (EOP).
ms.custom:
- seo-marvel-apr2020
ms.technology: mdo
ms.prod: m365-security
ms.openlocfilehash: 7412aa6c80ff91862a6346a03a9b299f5cbffde6
ms.sourcegitcommit: a7cd723fd62b4b0aae9c2c2df04ead3c28180084
ms.translationtype: MT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/02/2022
ms.locfileid: "65839175"
---
# <a name="configure-anti-malware-policies-in-eop"></a>تكوين نهج مكافحة البرامج الضارة في EOP

[!INCLUDE [MDO Trial banner](../includes/mdo-trial-banner.md)]

**ينطبق على**
- [Exchange Online Protection](exchange-online-protection-overview.md)
- [خطة 1 وخطة 2 من Microsoft Defender لـ Office 365](defender-for-office-365.md)
- [Microsoft 365 Defender](../defender/microsoft-365-defender.md)

في المؤسسات Microsoft 365 التي تحتوي على علب بريد في مؤسسات Exchange Online Protection Exchange Online أو مستقلة (EOP) بدون علب بريد Exchange Online، تتم حماية رسائل البريد الإلكتروني تلقائيا من البرامج الضارة بواسطة EOP. يستخدم EOP نهج مكافحة البرامج الضارة لإعدادات الحماية من البرامج الضارة. لمزيد من المعلومات، راجع [الحماية من البرامج الضارة](anti-malware-protection.md).

يمكن للمسؤولين عرض نهج مكافحة البرامج الضارة الافتراضي وتحريره وتكوينه (وليس حذفه) لتلبية احتياجات مؤسساتهم. لمزيد من التفاصيل، يمكنك أيضا إنشاء نهج مخصصة لمكافحة البرامج الضارة تنطبق على مستخدمين أو مجموعات أو مجالات معينة في مؤسستك. دائما ما يكون للنهج المخصصة الأسبقية على النهج الافتراضي، ولكن يمكنك تغيير الأولوية (ترتيب التشغيل) للنهج المخصصة.

يمكنك تكوين نهج مكافحة البرامج الضارة في مدخل Microsoft 365 Defender أو في PowerShell (Exchange Online PowerShell للمؤسسات Microsoft 365 مع علب بريد في Exchange Online؛ EOP PowerShell مستقل للمؤسسات دون Exchange Online علب البريد).

## <a name="what-do-you-need-to-know-before-you-begin"></a>ما الذي تحتاج إلى معرفته قبل البدء؟

- يمكنك فتح مدخل Microsoft 365 Defender في <https://security.microsoft.com>. للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

- للاتصال Exchange Online PowerShell، راجع [الاتصال إلى Exchange Online PowerShell](/powershell/exchange/connect-to-exchange-online-powershell). للاتصال ب EOP PowerShell مستقل، راجع [الاتصال إلى Exchange Online Protection PowerShell](/powershell/exchange/connect-to-exchange-online-protection-powershell).

- يجب تعيين أذونات لك في **Exchange Online** قبل أن تتمكن من تنفيذ الإجراءات الواردة في هذه المقالة:
  - لإضافة نهج مكافحة البرامج الضارة وتعديلها وحذفها، يجب أن تكون عضوا في مجموعات دور مسؤول **الأمان** أو **إدارة المؤسسة**.
  - للوصول للقراءة فقط إلى نهج مكافحة البرامج الضارة، يجب أن تكون عضوا في مجموعات دور **القارئ العمومي** أو **قارئ الأمان** .

  لمزيد من المعلومات، راجع [الأذونات في Exchange Online](/exchange/permissions-exo/permissions-exo).

  **الملاحظات**:

  - إضافة مستخدمين إلى دور Azure Active Directory المقابل في مركز مسؤولي Microsoft 365 يمنح المستخدمين الأذونات _والأذونات_ المطلوبة للميزات الأخرى في Microsoft 365. لمزيد من المعلومات، راجع [حول أدوار المسؤولين](../../admin/add-users/about-admin-roles.md).
  - كما توفر مجموعة دور **إدارة المؤسسة للعرض فقط** في [Exchange Online](/Exchange/permissions-exo/permissions-exo#role-groups) إمكانية الوصول للقراءة فقط إلى الميزة.

- للحصول على الإعدادات الموصى بها لنهج مكافحة البرامج الضارة، راجع [إعدادات نهج مكافحة البرامج الضارة EOP](recommended-settings-for-eop-and-office365.md#eop-anti-malware-policy-settings).

## <a name="use-the-microsoft-365-defender-portal-to-create-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لإنشاء نهج مكافحة البرامج الضارة

يؤدي إنشاء نهج مخصص لمكافحة البرامج الضارة في مدخل Microsoft 365 Defender إلى إنشاء قاعدة تصفية البرامج الضارة ونهج تصفية البرامج الضارة المقترنة في نفس الوقت باستخدام نفس الاسم لكليهما.

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، انقر فوق ![أيقونة "إنشاء".](../../media/m365-cc-sc-create-icon.png) **إنشاء**.

3. يفتح معالج النهج. في صفحة **"الاسم" في النهج** ، قم بتكوين هذه الإعدادات:
   - **الاسم**: أدخل اسما وصفيا فريدا للنهج.
   - **الوصف**: أدخل وصفا اختياريا للنهج.

   عند الانتهاء، انقر فوق **"التالي**".

4. في صفحة **المستخدمين والمجالات** التي تظهر، حدد المستلمين الداخليين الذين ينطبق عليهم النهج (شروط المستلمين):
   - **المستخدمون**: علب البريد أو مستخدمو البريد أو جهات اتصال البريد المحددة.
   - **المجموعات**:
     - أعضاء مجموعات التوزيع المحددة أو مجموعات الأمان الممكنة للبريد.
     - مجموعات Microsoft 365 المحددة.
   - **المجالات**: كافة المستلمين في [المجالات المقبولة المحددة](/exchange/mail-flow-best-practices/manage-accepted-domains/manage-accepted-domains) في مؤسستك.

   انقر في المربع المناسب، وابدأ بكتابة قيمة، وحدد القيمة التي تريدها من النتائج. كرر هذه العملية عدة مرات حسب الضرورة. لإزالة قيمة موجودة، انقر فوق "إزالة" ![الأيقونة "إزالة".](../../media/m365-cc-sc-remove-selection-icon.png) بجوار القيمة.

   بالنسبة للمستخدمين أو المجموعات، يمكنك استخدام معظم المعرفات (الاسم واسم العرض والاسم المستعار وعنوان البريد الإلكتروني واسم الحساب وما إلى ذلك)، ولكن يظهر اسم العرض المقابل في النتائج. بالنسبة للمستخدمين، أدخل علامة نجمية (\*) بحد ذاتها لمشاهدة كافة القيم المتوفرة.

   تستخدم القيم المتعددة في نفس الشرط منطق OR (على سبيل المثال، _\<recipient1\>_ أو _\<recipient2\>_). تستخدم الشروط المختلفة منطق AND (على سبيل المثال، _\<recipient1\>_ و _\<member of group 1\>_).

   - **استبعاد هؤلاء المستخدمين والمجموعات والمجالات**: لإضافة استثناءات للمستلمين الداخليين الذين ينطبق عليهم النهج (استثناءات المستلمين)، حدد هذا الخيار وقم بتكوين الاستثناءات. الإعدادات والسلوك تشبه تماما الشروط.

   عند الانتهاء، انقر فوق **"التالي**".

5. في صفحة **إعدادات الحماية** التي تظهر، قم بتكوين الإعدادات التالية:

   - **تمكين عامل تصفية المرفقات الشائع**: إذا حددت هذا الخيار، يتم التعامل مع الرسائل التي تحتوي على المرفقات المحددة على أنها برامج ضارة ويتم عزلها تلقائيا. يمكنك تعديل القائمة الافتراضية عن طريق تحديد **تخصيص أنواع الملفات**.

   - **تمكين الإزالة التلقائية بدون ساعة للبرامج الضارة**: إذا حددت هذا الخيار، فإن ZAP يعزل رسائل البرامج الضارة التي تم تسليمها بالفعل. لمزيد من المعلومات، راجع [الإزالة التلقائية لمدة صفر ساعة (ZAP) في Exchange Online](zero-hour-auto-purge.md). حدد إحدى هذه القيم:

   - **نهج العزل**: حدد نهج العزل الذي ينطبق على الرسائل التي يتم عزلها على أنها برامج ضارة. تحدد نهج العزل ما يمكن للمستخدمين القيام به للرسائل المعزولة، وما إذا كان المستخدمون يتلقون إعلامات العزل. لمزيد من المعلومات، راجع [نهج العزل](quarantine-policies.md).

     تعني القيمة الفارغة أنه يتم استخدام نهج العزل الافتراضي (AdminOnlyAccessPolicy لاكتشاف البرامج الضارة). عند تحرير نهج مكافحة البرامج الضارة لاحقا أو عرض الإعدادات، يظهر اسم نهج العزل الافتراضي. لمزيد من المعلومات حول نهج العزل الافتراضية المستخدمة في أحكام تصفية الحماية المدعومة، راجع [هذا الجدول](quarantine-policies.md#step-2-assign-a-quarantine-policy-to-supported-features).

   - **إعلام المستلمين عند عزل الرسائل على أنها برامج ضارة**:
     - إذا حددت هذا الخيار، يتم عزل الرسالة. يتم تسليم نسخة من الرسالة إلى المستلمين، ولكن يتم استبدال *كافة* المرفقات (وليس مرفقات البرامج الضارة فقط) بملف نصي واحد يسمى **"تنبيه البرامج الضارة" Text.txt**.

       يتم وصف النص الافتراضي في الملف النصي البديل في [نهج مكافحة البرامج الضارة](anti-malware-protection.md#anti-malware-policies). لاستخدام نص مخصص بدلا من ذلك، أدخل النص في **نص الإعلام المخصص إلى مربع المستلم** .

     - إذا لم تحدد هذا الخيار، يتم عزل الرسالة بصمت.

     > [!NOTE]
     > بغض النظر عن الخيار الذي تحدده، يحدد نهج العزل ما إذا كان المستلمون يتلقون إعلامات العزل (إعلامات البريد الإلكتروني للرسائل التي تم عزلها كبرود ضار).

   - **إعلامات المرسل**: حدد أيا من الخيارين التاليين أو أحدهما أو الخيارين التاليين:
       - **إعلام المرسلين الداخليين عند عزل الرسائل على أنها برامج ضارة**: يوجد مرسل داخلي داخل المؤسسة.
       - **إعلام المرسلين الخارجيين عند عزل الرسائل على أنها برامج ضارة**: يوجد مرسل خارجي خارج المؤسسة.

   - **مسؤول الإعلامات**: حدد أيا من الخيارين التاليين أو أحدهما أو الخيارين التاليين:
       - **إعلام المسؤول بالرسائل التي لم يتم التسليم من المرسلين الداخليين**: إذا حددت هذا الخيار، أدخل عنوان بريد إلكتروني للإعلام في مربع **عنوان البريد الإلكتروني مسؤول** الذي يظهر.
       - **إعلام مسؤول بالرسائل التي لم يتم التسليم من مرسلين خارجيين**: إذا حددت هذا الخيار، أدخل عنوان بريد إلكتروني للإعلام في مربع **عنوان البريد الإلكتروني مسؤول** الذي يظهر.

     > [!NOTE]
     > يتم إرسال إعلامات مسؤول فقط _للمرفقات_ المصنفة على أنها برامج ضارة.

   - **تخصيص الإعلامات**: تحل هذه الإعدادات محل نص الإعلام الافتراضي المستخدم للمرسلين أو المسؤولين. لمزيد من المعلومات حول القيم الافتراضية، راجع [نهج مكافحة البرامج الضارة](anti-malware-protection.md#anti-malware-policies).
       - **استخدم نص الإعلام المخصص**: إذا حددت هذا الخيار، فستحتاج إلى استخدام مربعي **العنوان "من"** و" **من** " لتحديد اسم المرسل وعنوان البريد الإلكتروني المستخدم في رسالة الإعلام المخصصة.
       - **تخصيص الإعلامات للرسائل الواردة من المرسلين الداخليين**: إذا اخترت إعلام المرسلين أو المسؤولين بالرسائل غير القابلة للتسليم من المرسلين الداخليين، فستحتاج إلى استخدام مربعي **الموضوع** **والرسالة** لتحديد الموضوع والنص الأساسي للرسالة في رسالة الإعلام المخصصة.
       - **تخصيص الإعلامات للرسائل الواردة من مرسلين خارجيين**: إذا اخترت إعلام المرسلين أو المسؤولين بالرسائل غير القابلة للتسليم من المرسلين الخارجيين، فستحتاج إلى استخدام مربعي **الموضوع** **والرسالة** لتحديد الموضوع والنص الأساسي للرسالة في رسالة الإعلام المخصصة.

   عند الانتهاء، انقر فوق **"التالي**".

6. في صفحة **المراجعة** التي تظهر، راجع الإعدادات. يمكنك تحديد **"تحرير"** في كل مقطع لتعديل الإعدادات داخل المقطع. أو يمكنك النقر فوق **"الخلف"** أو تحديد الصفحة المحددة في المعالج.

   عند الانتهاء، انقر فوق **"إرسال**".

7. في صفحة التأكيد التي تظهر، انقر فوق **"تم**".

## <a name="use-the-microsoft-365-defender-portal-to-view-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لعرض نهج مكافحة البرامج الضارة

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، يتم عرض الخصائص التالية في قائمة نهج مكافحة البرامج الضارة:
   - **الاسم**
   - **حاله**
   - **الاولويه**

3. عند تحديد نهج بالنقر فوق الاسم، يتم عرض إعدادات النهج في قائمة منبثقة.

## <a name="use-the-microsoft-365-defender-portal-to-modify-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لتعديل نهج مكافحة البرامج الضارة

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، حدد نهجا من القائمة بالنقر فوق الاسم.

3. في القائمة المنبثقة لتفاصيل النهج التي تظهر، حدد **"تحرير"** في كل مقطع لتعديل الإعدادات داخل المقطع. لمزيد من المعلومات حول الإعدادات، راجع مدخل Microsoft 365 Defender السابق [لإنشاء قسم نهج مكافحة البرامج الضارة](#use-the-microsoft-365-defender-portal-to-create-anti-malware-policies) في هذه المقالة.

   بالنسبة إلى نهج مكافحة البرامج الضارة الافتراضي، لا يتوفر قسم **المستخدمين والمجموعات والمجالات** (ينطبق النهج على الجميع)، ولا يمكنك إعادة تسمية النهج.

لتمكين نهج أو تعطيله أو تعيين ترتيب أولوية النهج، راجع الأقسام التالية.

### <a name="enable-or-disable-custom-anti-malware-policies"></a>تمكين نهج مكافحة البرامج الضارة المخصصة أو تعطيلها

لا يمكنك تعطيل نهج مكافحة البرامج الضارة الافتراضي.

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، حدد نهجا مخصصا من القائمة بالنقر فوق الاسم.

3. في أعلى القائمة المنبثقة لتفاصيل النهج التي تظهر، سترى إحدى القيم التالية:
   - **إيقاف تشغيل النهج**: لتشغيل النهج، انقر فوق !["تشغيل الأيقونة".](../../media/m365-cc-sc-turn-on-off-icon.png) **تشغيل** .
   - **تم تشغيل النهج**: لإيقاف تشغيل النهج، انقر فوق !["إيقاف تشغيل الأيقونة".](../../media/m365-cc-sc-turn-on-off-icon.png) **إيقاف التشغيل**.

4. في مربع حوار التأكيد الذي يظهر، انقر فوق **"تشغيل** " أو **"إيقاف تشغيل**".

5. انقر فوق **"إغلاق** " في القائمة المنبثقة لتفاصيل النهج.

بالعودة إلى صفحة النهج الرئيسية، ستكون قيمة **الحالة** للنهج **قيد التشغيل** أو **متوقفة عن التشغيل**.

### <a name="set-the-priority-of-custom-anti-malware-policies"></a>تعيين أولوية نهج مكافحة البرامج الضارة المخصصة

بشكل افتراضي، يتم إعطاء نهج مكافحة البرامج الضارة أولوية تستند إلى الترتيب الذي تم إنشاؤها فيه (النهج الأحدث أقل أولوية من النهج القديمة). يشير رقم الأولوية الأقل إلى أولوية أعلى للنهج (0 هو الأعلى)، وتتم معالجة النهج بترتيب الأولوية (تتم معالجة نهج الأولوية الأعلى قبل نهج الأولوية الدنيا). لا يمكن أن يكون لأي نهجين نفس الأولوية، وتتوقف معالجة النهج بعد تطبيق النهج الأول.

لتغيير أولوية النهج، انقر فوق **"زيادة الأولوية**" أو **"إنقاص الأولوية**" في خصائص النهج (لا يمكنك تعديل رقم **"الأولوية**" مباشرة في مدخل Microsoft 365 Defender). تغيير أولوية النهج أمر منطقي فقط إذا كان لديك نهج متعددة.

 **الملاحظات**:

- في مدخل Microsoft 365 Defender، يمكنك فقط تغيير أولوية نهج مكافحة البرامج الضارة بعد إنشائه. في PowerShell، يمكنك تجاوز الأولوية الافتراضية عند إنشاء قاعدة تصفية البرامج الضارة (والتي يمكن أن تؤثر على أولوية القواعد الموجودة).
- تتم معالجة نهج مكافحة البرامج الضارة بالترتيب الذي يتم عرضه (النهج الأول له قيمة **الأولوية** 0). نهج مكافحة البرامج الضارة الافتراضي له قيمة الأولوية **الأدنى**، ولا يمكنك تغييره.

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في صفحة **مكافحة البرامج الضارة** ، حدد نهجا مخصصا من القائمة بالنقر فوق الاسم.

3. في أعلى القائمة المنبثقة لتفاصيل النهج التي تظهر، سترى **زيادة الأولوية** أو **إنقاص الأولوية** استنادا إلى قيمة الأولوية الحالية وعدد النهج المخصصة:
   - يحتوي النهج الذي يحتوي على قيمة **الأولوية** **0** على الخيار **"إنقاص الأولوية** " المتاح فقط.
   - يحتوي النهج الذي يحتوي على أقل قيمة **أولوية** (على سبيل المثال، **3**) على الخيار **"زيادة الأولوية** " المتاح فقط.
   - إذا كان لديك ثلاثة نهج أو أكثر، فإن النهج بين القيم ذات الأولوية الأعلى والدنيا تحتوي على كل من خيارات **"زيادة الأولوية** " و" **إنقاص الأولوية** " المتوفرة.

   انقر فوق ![أيقونة "زيادة الأولوية".](../../media/m365-cc-sc-increase-icon.png) **زيادة الأولوية** أو ![أيقونة](../../media/m365-cc-sc-decrease-icon.png) **"إنقاص الأولوية" "إنقاص الأولوية** " لتغيير قيمة **"الأولوية** ".

4. عند الانتهاء، انقر فوق **"إغلاق** " في القائمة المنبثقة لتفاصيل النهج.

## <a name="use-the-microsoft-365-defender-portal-to-remove-custom-anti-malware-policies"></a>استخدام مدخل Microsoft 365 Defender لإزالة نهج مكافحة البرامج الضارة المخصصة

عند استخدام مدخل Microsoft 365 Defender لإزالة نهج مخصص لمكافحة البرامج الضارة، يتم حذف قاعدة تصفية البرامج الضارة ونهج تصفية البرامج الضارة المقابلة. لا يمكنك إزالة النهج الافتراضي لمكافحة البرامج الضارة.

1. في مدخل Microsoft 365 Defender، <https://security.microsoft.com>انتقل إلى **"نهج التعاون** \> & البريد الإلكتروني **" & نهج** \> **"قواعد التهديد** \> **" لمكافحة البرامج الضارة** في قسم **"النهج**". للانتقال مباشرة إلى صفحة **مكافحة البرامج الضارة** ، استخدم <https://security.microsoft.com/antimalwarev2>.

2. في **صفحة مكافحة البرامج الضارة**، حدد نهجا مخصصا من القائمة بالنقر فوق الاسم.

3. في أعلى القائمة المنبثقة لتفاصيل النهج التي تظهر، انقر فوق ![أيقونة المزيد من الإجراءات.](../../media/m365-cc-sc-more-actions-icon.png) **المزيد من الإجراءات** \> ![حذف أيقونة](../../media/m365-cc-sc-delete-icon.png) نهج **حذف النهج**.

4. في مربع حوار التأكيد الذي يظهر، انقر فوق **"نعم**".

## <a name="use-exchange-online-powershell-or-standalone-eop-powershell-to-configure-anti-malware-policies"></a>استخدام Exchange Online PowerShell أو EOP PowerShell المستقل لتكوين نهج مكافحة البرامج الضارة

لمزيد من المعلومات حول نهج مكافحة البريد العشوائي في PowerShell، راجع [نهج مكافحة البرامج الضارة في مدخل Microsoft 365 Defender مقابل PowerShell](anti-malware-protection.md#anti-malware-policies-in-the-microsoft-365-defender-portal-vs-powershell).

### <a name="use-powershell-to-create-anti-malware-policies"></a>استخدام PowerShell لإنشاء نهج مكافحة البرامج الضارة

إنشاء نهج مكافحة البرامج الضارة في PowerShell هو عملية من خطوتين:

1. إنشاء نهج تصفية البرامج الضارة.
2. إنشاء قاعدة تصفية البرامج الضارة التي تحدد نهج تصفية البرامج الضارة التي تنطبق عليها القاعدة.

 **الملاحظات**:

- يمكنك إنشاء قاعدة تصفية برامج ضارة جديدة وتعيين نهج عامل تصفية برامج ضارة غير مقترنة إليها. لا يمكن إقران قاعدة عامل تصفية البرامج الضارة بأكثر من نهج واحد لتصفية البرامج الضارة.
- هناك إعدادان يمكنك تكوينهما على نهج جديدة لمكافحة البرامج الضارة في PowerShell لا تتوفر في مدخل Microsoft 365 Defender حتى بعد إنشاء النهج:
  - إنشاء النهج الجديد كتعطيل (_ممكن_ `$false` على **New-MalwareFilterRule** cmdlet).
  - تعيين أولوية النهج أثناء الإنشاء (_الأولوية__\<Number\>_) على **New-MalwareFilterRule** cmdlet).
- لا يظهر نهج تصفية البرامج الضارة الجديد الذي تقوم بإنشائه في PowerShell في مدخل Microsoft 365 Defender حتى تقوم بتعيين النهج إلى قاعدة تصفية البرامج الضارة.

#### <a name="step-1-use-powershell-to-create-a-malware-filter-policy"></a>الخطوة 1: استخدام PowerShell لإنشاء نهج تصفية البرامج الضارة

**ملاحظة**: في الخدمة المستندة إلى السحابة، قيم `DeleteMessage`معلمة _الإجراء_، `DeleteAttachmentAndUseDefaultAlert`ولا `DeleteAttachmentAndUseCustomAlert` تحذف الرسائل. بدلا من ذلك، يتم عزل الرسائل دائما. لمزيد من المعلومات حول استرداد الرسائل المعزولة، راجع [إدارة الرسائل والملفات المعزولة كمسؤول في EOP](manage-quarantined-messages-and-files.md).

لإنشاء نهج تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
New-MalwareFilterPolicy -Name "<PolicyName>" [-Action <DeleteMessage | DeleteAttachmentAndUseDefaultAlert | DeleteAttachmentAndUseCustomAlert>] [-AdminDisplayName "<OptionalComments>"] [-CustomNotifications <$true | $false>] [<Inbound notification options>] [<Outbound notification options>] [-QuarantineTag <QuarantineTagName>]
```

ينشئ هذا المثال نهج تصفية برامج ضارة جديد يسمى Contoso Malware Filter Policy مع هذه الإعدادات:

- رسائل العزل التي تحتوي على برامج ضارة دون إعلام المستلمين (نحن لا نستخدم معلمة _الإجراء_ ، والقيمة الافتراضية هي `DeleteMessage`).
- لا تقم بإعلام مرسل الرسالة عند اكتشاف البرامج الضارة في الرسالة (نحن لا نستخدم _معلمات EnableExternalSenderNotifications_ أو _EnableInternalSenderNotifications_ ، والقيمة الافتراضية لكليهما هي `$false`).
- قم بإعلام المسؤول admin@contoso.com عند الكشف عن البرامج الضارة في رسالة من مرسل داخلي.
- يتم استخدام [نهج العزل](quarantine-policies.md) الافتراضي للكشف عن البرامج الضارة (نحن لا نستخدم معلمة _QuarantineTag_ ).

```PowerShell
New-MalwareFilterPolicy -Name "Contoso Malware Filter Policy" -EnableInternalSenderAdminNotifications $true -InternalSenderAdminAddress admin@contoso.com
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [New-MalwareFilterPolicy](/powershell/module/exchange/new-malwarefilterpolicy).

#### <a name="step-2-use-powershell-to-create-a-malware-filter-rule"></a>الخطوة 2: استخدام PowerShell لإنشاء قاعدة تصفية البرامج الضارة

لإنشاء قاعدة عامل تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
New-MalwareFilterRule -Name "<RuleName>" -MalwareFilterPolicy "<PolicyName>" <Recipient filters> [<Recipient filter exceptions>] [-Comments "<OptionalComments>"]
```

ينشئ هذا المثال قاعدة تصفية برامج ضارة جديدة تسمى "مستلمو Contoso" مع هذه الإعدادات:

- يرتبط نهج تصفية البرامج الضارة المسمى Contoso Malware Filter Policy بالقاعدة.
- تنطبق القاعدة على المستلمين في مجال contoso.com.

```PowerShell
New-MalwareFilterRule -Name "Contoso Recipients" -MalwareFilterPolicy "Contoso Malware Filter Policy" -RecipientDomainIs contoso.com
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [New-MalwareFilterRule](/powershell/module/exchange/new-malwarefilterrule).

### <a name="use-powershell-to-view-malware-filter-policies"></a>استخدام PowerShell لعرض نهج تصفية البرامج الضارة

لإرجاع قائمة ملخصة لكافة نهج تصفية البرامج الضارة، قم بتشغيل هذا الأمر:

```PowerShell
Get-MalwareFilterPolicy
```

لإرجاع معلومات مفصلة حول نهج تصفية برامج ضارة معينة، استخدم بناء الجملة هذا:

```PowerShell
Get-MalwareFilterPolicy -Identity "<PolicyName>" | Format-List [<Specific properties to view>]
```

يرجع هذا المثال كافة قيم الخصائص لنهج تصفية البرامج الضارة المسمى المديرين التنفيذيين.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List
```

يرجع هذا المثال الخصائص المحددة للنهج نفسه فقط.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List Action,AdminDisplayName,CustomNotifications,Enable*Notifications
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Get-MalwareFilterPolicy](/powershell/module/exchange/get-malwarefilterpolicy).

### <a name="use-powershell-to-view-malware-filter-rules"></a>استخدام PowerShell لعرض قواعد تصفية البرامج الضارة

لإرجاع قائمة ملخصة لكافة قواعد تصفية البرامج الضارة، قم بتشغيل هذا الأمر:

```PowerShell
Get-MalwareFilterRule
```

لتصفية القائمة حسب القواعد الممكنة أو المعطلة، قم بتشغيل الأوامر التالية:

```PowerShell
Get-MalwareFilterRule -State Disabled
```

```PowerShell
Get-MalwareFilterRule -State Enabled
```

لإرجاع معلومات مفصلة حول قاعدة تصفية برامج ضارة معينة، استخدم بناء الجملة هذا:

```PowerShell
Get-MalwareFilterRule -Identity "<RuleName>" | Format-List [<Specific properties to view>]
```

يقوم هذا المثال بإرجاع كافة قيم الخصائص لقاعدة تصفية البرامج الضارة المسماة المديرين التنفيذيين.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List
```

يرجع هذا المثال الخصائص المحددة للقاعدة نفسها فقط.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List Name,Priority,State,MalwareFilterPolicy,*Is,*SentTo,*MemberOf
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Get-MalwareFilterRule](/powershell/module/exchange/get-malwarefilterrule).

### <a name="use-powershell-to-modify-malware-filter-policies"></a>استخدام PowerShell لتعديل نهج تصفية البرامج الضارة

بخلاف العناصر التالية، تتوفر نفس الإعدادات عند تعديل نهج تصفية البرامج الضارة في PowerShell كما هو الحال عند إنشاء النهج كما هو موضح في [الخطوة 1: استخدم PowerShell لإنشاء قسم نهج تصفية البرامج الضارة](#step-1-use-powershell-to-create-a-malware-filter-policy) في وقت سابق من هذه المقالة.

- يتوفر مفتاح _التبديل MakeDefault_ الذي يحول النهج المحدد إلى نهج افتراضي (مطبق على الجميع **، أدنى أولوية** غير قابلة للتعديل، ولا يمكنك حذفه) فقط عند تعديل نهج تصفية البرامج الضارة في PowerShell.
- لا يمكنك إعادة تسمية نهج عامل تصفية البرامج الضارة (لا يحتوي **Cmdlet Set-MalwareFilterPolicy** على معلمة _اسم_ ). عند إعادة تسمية نهج مكافحة البرامج الضارة في مدخل Microsoft 365 Defender، فأنت تعيد تسمية _قاعدة_ تصفية البرامج الضارة فقط.

لتعديل نهج تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Set-MalwareFilterPolicy -Identity "<PolicyName>" <Settings>
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Set-MalwareFilterPolicy](/powershell/module/exchange/set-malwarefilterpolicy).

> [!NOTE]
> للحصول على إرشادات مفصلة لتحديد [نهج العزل](quarantine-policies.md) لاستخدامه في نهج تصفية البرامج الضارة، راجع [استخدام PowerShell لتحديد نهج العزل في نهج مكافحة البرامج الضارة](quarantine-policies.md#anti-malware-policies-in-powershell).

### <a name="use-powershell-to-modify-malware-filter-rules"></a>استخدام PowerShell لتعديل قواعد تصفية البرامج الضارة

الإعداد الوحيد غير المتوفر عند تعديل قاعدة عامل تصفية البرامج الضارة في PowerShell هو المعلمة _الممكنة_ التي تسمح لك بإنشاء قاعدة معطلة. لتمكين قواعد تصفية البرامج الضارة الموجودة أو تعطيلها، راجع القسم التالي.

وإلا، فلن تتوفر إعدادات إضافية عند تعديل قاعدة تصفية البرامج الضارة في PowerShell. تتوفر نفس الإعدادات عند إنشاء قاعدة كما هو موضح في [الخطوة 2: استخدم PowerShell لإنشاء قسم قاعدة تصفية البرامج الضارة](#step-2-use-powershell-to-create-a-malware-filter-rule) سابقا في هذه المقالة.

لتعديل قاعدة عامل تصفية البرامج الضارة، استخدم بناء الجملة هذا:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" <Settings>
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Set-MalwareFilterRule](/powershell/module/exchange/set-malwarefilterrule).

### <a name="use-powershell-to-enable-or-disable-malware-filter-rules"></a>استخدام PowerShell لتمكين قواعد تصفية البرامج الضارة أو تعطيلها

تمكين قاعدة عامل تصفية البرامج الضارة أو تعطيلها في PowerShell يمكن أو يعطل نهج مكافحة البرامج الضارة بأكمله (قاعدة تصفية البرامج الضارة ونهج تصفية البرامج الضارة المعين). لا يمكنك تمكين نهج مكافحة البرامج الضارة الافتراضي أو تعطيله (يتم تطبيقه دائما على جميع المستلمين).

لتمكين قاعدة عامل تصفية البرامج الضارة أو تعطيلها في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
<Enable-MalwareFilterRule | Disable-MalwareFilterRule> -Identity "<RuleName>"
```

يعطل هذا المثال قاعدة عامل تصفية البرامج الضارة المسماة "قسم التسويق".

```PowerShell
Disable-MalwareFilterRule -Identity "Marketing Department"
```

يمكن هذا المثال القاعدة نفسها.

```PowerShell
Enable-MalwareFilterRule -Identity "Marketing Department"
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Enable-MalwareFilterRule](/powershell/module/exchange/enable-malwarefilterrule) و [Disable-MalwareFilterRule](/powershell/module/exchange/disable-malwarefilterrule).

### <a name="use-powershell-to-set-the-priority-of-malware-filter-rules"></a>استخدام PowerShell لتعيين أولوية قواعد تصفية البرامج الضارة

أعلى قيمة أولوية يمكنك تعيينها على قاعدة هي 0. تعتمد أقل قيمة يمكنك تعيينها على عدد القواعد. على سبيل المثال، إذا كان لديك خمس قواعد، يمكنك استخدام قيم الأولوية من 0 إلى 4. يمكن أن يكون لتغيير أولوية قاعدة موجودة تأثير متتالي على قواعد أخرى. على سبيل المثال، إذا كان لديك خمس قواعد مخصصة (الأولويات من 0 إلى 4)، وقمت بتغيير أولوية قاعدة إلى 2، يتم تغيير القاعدة الموجودة ذات الأولوية 2 إلى الأولوية 3، ويتم تغيير القاعدة ذات الأولوية 3 إلى الأولوية 4.

لتعيين أولوية قاعدة عامل تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة التالي:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" -Priority <Number>
```

يعين هذا المثال أولوية القاعدة المسماة "قسم التسويق" إلى 2. يتم تقليل كافة القواعد الموجودة التي لها أولوية أقل من أو تساوي 2 بمقدار 1 (يتم زيادة أرقام الأولوية الخاصة بها بمقدار 1).

```PowerShell
Set-MalwareFilterRule -Identity "Marketing Department" -Priority 2
```

**الملاحظات**:

- لتعيين أولوية قاعدة جديدة عند إنشائها، استخدم معلمة _الأولوية_ على **New-MalwareFilterRule** cmdlet بدلا من ذلك.
- لا يحتوي نهج تصفية البرامج الضارة الافتراضي على قاعدة تصفية برامج ضارة مقابلة، ويحتوي دائما على قيمة الأولوية غير القابلة للتعديل **الأقل**.

### <a name="use-powershell-to-remove-malware-filter-policies"></a>استخدام PowerShell لإزالة نهج تصفية البرامج الضارة

عند استخدام PowerShell لإزالة نهج تصفية البرامج الضارة، لا تتم إزالة قاعدة تصفية البرامج الضارة المقابلة.

لإزالة نهج تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
Remove-MalwareFilterPolicy -Identity "<PolicyName>"
```

يزيل هذا المثال نهج تصفية البرامج الضارة المسمى "قسم التسويق".

```PowerShell
Remove-MalwareFilterPolicy -Identity "Marketing Department"
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Remove-MalwareFilterPolicy](/powershell/module/exchange/remove-malwarefilterpolicy).

### <a name="use-powershell-to-remove-malware-filter-rules"></a>استخدام PowerShell لإزالة قواعد تصفية البرامج الضارة

عند استخدام PowerShell لإزالة قاعدة تصفية البرامج الضارة، لا تتم إزالة نهج تصفية البرامج الضارة المقابلة.

لإزالة قاعدة عامل تصفية البرامج الضارة في PowerShell، استخدم بناء الجملة هذا:

```PowerShell
Remove-MalwareFilterRule -Identity "<PolicyName>"
```

يزيل هذا المثال قاعدة عامل تصفية البرامج الضارة المسماة "قسم التسويق".

```PowerShell
Remove-MalwareFilterRule -Identity "Marketing Department"
```

للحصول على معلومات مفصلة حول بناء الجملة والمعلمة، راجع [Remove-MalwareFilterRule](/powershell/module/exchange/remove-malwarefilterrule).

## <a name="how-do-you-know-these-procedures-worked"></a>كيف تعرف أن هذه الإجراءات تعمل؟

### <a name="use-the-eicartxt-file-to-verify-your-anti-malware-policy-settings"></a>استخدم ملف EICAR.TXT للتحقق من إعدادات نهج مكافحة البرامج الضارة

> [!IMPORTANT]
> الملف EICAR.TXT ليس فيروسا. قام المعهد الأوروبي لأبحاث مكافحة الفيروسات للكمبيوتر (EICAR) بتطوير هذا الملف لاختبار تثبيتات وإعدادات مكافحة الفيروسات بأمان.

1. افتح المفكرة والصق النص التالي في ملف فارغ:

   ```Text
   X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*
   ```

   تأكد من أن هذه هي الأحرف النصية الوحيدة في الملف. يجب أن يكون حجم الملف 68 بايت.

2. حفظ الملف ك EICAR.TXT

   في برنامج مكافحة الفيروسات لسطح المكتب، تأكد من استبعاد EICAR.TXT من الفحص (وإلا، سيتم عزل الملف).

3. أرسل رسالة بريد إلكتروني تحتوي على ملف EICAR.TXT كمرفق، باستخدام عميل بريد إلكتروني لن يقوم بحظر الملف تلقائيا، واستخدام خدمة بريد إلكتروني لا تحظر البريد العشوائي الصادر تلقائيا. استخدم إعدادات نهج مكافحة البرامج الضارة لتحديد السيناريوهات التالية لاختبار:
   - البريد الإلكتروني من علبة بريد داخلية إلى مستلم داخلي.
   - البريد الإلكتروني من علبة بريد داخلية إلى مستلم خارجي.
   - البريد الإلكتروني من علبة بريد خارجية إلى مستلم داخلي.

4. تحقق من عزل الرسالة، وتحقق من نتائج إعلام المستلم والمرسل استنادا إلى إعدادات نهج مكافحة البرامج الضارة. على سبيل المثال:
   - لا يتم إعلام المستلمين، أو يتلقى المستلمون الرسالة الأصلية مع استبدال مرفق EICAR.TXT **Text.txtتنبيه البرامج الضارة** التي تحتوي على النص الافتراضي أو المخصص.
   - يتم إعلام المرسلين الداخليين أو الخارجيين برسائل الإعلام الافتراضية أو المخصصة.
   - يتم إعلام عنوان البريد الإلكتروني للمسؤول الذي حددته لمرسلي الرسائل الداخليين أو الخارجيين، مع رسائل الإعلام الافتراضية أو المخصصة.

5. احذف ملف EICAR.TXT بعد اكتمال الاختبار (لذلك لا يشعر المستخدمون الآخرون بالجزع بشكل غير داع).
